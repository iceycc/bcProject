webpackJsonp([115],{Kgid:function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var n=a("Dd8w"),e=a.n(n),i=a("xEK7"),o=a("xoIZ"),r=a("Ij8P"),c=a("0jG4"),h=a("EOwk"),l=a("MmTA"),u=a("JIj5"),_=a("UNnc"),k=a("msXN"),f={name:"changeBank",components:{BankSelect:i.a,ActiveInput:o.a,ErrMsg:r.a,PassInput:_.a},data:function(){return{bankText:"请选择银行",bankList:[],AllBankListObj:{},errMsg:"",bankNo:"",bankNameToNo:!1,params:{},ifGet:!1,ifShow:!1}},mixins:[k.a.HandleMixin],created:function(){var t=this;this.getErrMsg(function(s){t.errMsg=s.msg}),this.getBankList(),this.params=this.$store.getters.GET_COMMON_STATE.Infos},watch:{bankNo:function(t,s){this.checkBankName(this.bankNo)},bankText:function(t,s){this.checkBankName(this.bankNo)}},methods:{getBank:function(t){this.bankText=t.name},checkBankName:function(t,s){this.bankNameToNo=!1,t=t.replace(/\s+/g,"");for(var a=void 0,n=3;n<10;n++)if(a=this.machBankName((t+"").slice(0,n))){if(a!=this.bankText)return;this.bankNameToNo=!0;break}},checkBankNo:function(t){return t=t.toString(),"请选择银行"==this.bankText?(this.showErrMsg("请选择银行"),!0):""==t?(this.showErrMsg("银行卡号不能为空"),!0):t.length<15||t.length>19?(this.showErrMsg("银行卡号有误，请确认后再次输入"),!0):(this.checkBankName(t),!1)},machBankName:function(t){return this.AllBankListObj[t]},getBankList:function(){var t=this;c.a.list.apiGetBankCardList({},function(s){var a={};s.BAND_CARD_LIST.forEach(function(t){a[t.BANK_CARD_BIN]=t.BANK_NAME}),t.AllBankListObj=a,t.bankList=s.SUPPORT_BANK_LIST.map(function(t){return{name:t.BANK_NAME,value:0,src:h.g+t.BANK_LOGO_URL,Index:t.INITIAL}})})},showErrMsg:function(t){var s=this;this.errMsg=t,setTimeout(function(){s.errMsg=""},4e3)},subumit:function(){var t,s=this,a=$("#change_bank_pay_pass").$getCiphertext(),n=$("#change_bank_pay_pass").$getPasswordLength()-0||0;if(t=u.a.Check.payPassLen(n))this.showErrMsg(t);else{var i=e()({CARD_NO:this.bankNo,BANK_PAY_PW:a},this.params);c.a.safe.apiChangeBingCard(i,!0,function(t){l.a.$emit(h.a.showToast,"更换银行卡成功"),s.$router.push({name:h.e.MoreService})},function(t){console.log("err>>>>>>>>1111",t),s.errMsg=t,s.ifShow=!1,s.setErrMsg({msg:t}),setTimeout(function(){window.location.reload()},500)})}},goNext:function(){this.checkBankNo(this.bankNo)||(console.log("goNext>>",this.bankNameToNo),this.bankNameToNo?this.ifShow=!0:this.showErrMsg("银行卡和银行名称不匹配"))}}},v={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[a("app-bar",{attrs:{title:"更换银行卡"}}),t._v(" "),a("section",{staticClass:"m-form"},[a("section",{staticClass:"bank"},[a("span",{staticClass:"n-left"},[t._v("选择银行")]),t._v(" "),a("Bank-select",{staticClass:"bank-box",attrs:{text:t.bankText,options:t.bankList,title:"银行列表"},on:{getValue:t.getBank}})],1),t._v(" "),a("active-input",{attrs:{"check-type":"number",valuePlaceholder:"新绑定卡卡号",max:"20"},model:{value:t.bankNo,callback:function(s){t.bankNo=s},expression:"bankNo"}}),t._v(" "),a("section",{staticClass:"submit-box"},[a("err-msg",{attrs:{errMsg:t.errMsg,classStyle:"err-msg"}}),t._v(" "),a("button",{staticClass:"submit-btn",on:{click:t.goNext}},[t._v("下一步")])],1),t._v(" "),t._m(0)],1),t._v(" "),t.ifShow?a("div",{staticClass:"bgbox"},[a("div",{staticClass:"passbox"},[a("div",{staticClass:"top"},[t._m(1),t._v(" "),a("div",{staticClass:"field_row_wrap"},[a("p",{staticClass:"field_row_key"},[t._v("\n                        支付密码\n                    ")]),t._v(" "),a("div",{staticClass:"field_row_value"},[a("pass-input",{attrs:{inputID:"change_bank_pay_pass",doGetData:t.ifGet}})],1),t._v(" "),a("p",{staticClass:"info"},[t._v("密码由数字组成，必须为6位")])])]),t._v(" "),a("div",{staticClass:"btn"},[a("button",{on:{click:function(s){t.ifShow=!1}}},[t._v("取消")]),t._v(" "),a("button",{on:{click:t.subumit}},[t._v("提交")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("section",{staticClass:"foot-text"},[s("p",[this._v("温馨提示：")]),this._v(" "),s("p",[this._v("1.请您确认新绑定银行卡在银行绑定的手机号与旧卡 绑定手机号相同。")]),this._v(" "),s("p",[this._v("2.更换绑定银行卡前，请转出所有的投资资金并提现")])])},function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"title"},[s("img",{attrs:{src:a("j732"),alt:""}}),this._v("\n                    由晋商银行提供技术保障")])}]};var b=a("VU/8")(f,v,!1,function(t){a("aRFA")},"data-v-110c69f8",null);s.default=b.exports},aRFA:function(t,s){}});
//# sourceMappingURL=115.1c0ad28e99e1b0c679ee.js.map