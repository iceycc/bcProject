webpackJsonp([69],{"85SI":function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("Dd8w"),n=a.n(s),o=a("0jG4"),i=a("JIj5"),r=a("EOwk"),c=a("b1t1"),l=a("msXN"),u=a("MmTA"),m=void 0,d={data:function(){return{agree:!0,msgdisable:!1,PHONE_CODE:"",codeText:"获取验证码",imgSrc:r.g,show:!1,isFocus:!1,typeShow:!1,cur:"0",money:"",typeText:"快速支取",normalShow:!1,redeemData:{INVEST_AMOUNT:"",FUND_NO:"",PRD_TYPE:"1"},EFFCT_INTEREST_RATE:"",passCode:"",len:"",pass:""}},computed:{ifCheckMoneyEmpty:function(){return!this.money},availBtn:function(){return!!(this.agree&&this.money&&this.PHONE_CODE)},placeholder:function(){var e=this.redeemData.INVEST_AMOUNT;return"最多可支取金额"+i.a.formatNum(e)+"元"}},mixins:[l.a.HandleMixin,l.a.UtilMixin],watch:{},created:function(){this.redeemData=this.getComState.redeemData},components:{PassWordZhengzhou:c.a},methods:{clearNumHandle:function(){this.money=""},debounce:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:300,a=void 0,s=0,n=void 0,o=void 0,i=function(){a=setTimeout(function(){e.apply(n,o)},t)};return function(){n=this,o=arguments;var e=(new Date).getTime();e-s<t?(console.log("reset",e),clearTimeout(a),i()):(console.log("set",e),i()),s=e}},inputHandle:function(){this.getPreCalculation()},getPreCalculation:function(){var e=this;console.log(1);var t={ORDER_NO:this.redeemData.ORDER_NUM,DRAW_AMOUNT:this.money};o.a.bank.apiInterestCalculation(t,function(t){e.EFFCT_INTEREST_RATE=t.NET_INT})},getMsg:function(){var e=this;if(this.money){var t=this.redeemData.INVEST_AMOUNT||0;if(this.money-0>t-0)u.a.$emit(r.a.showToast,"支取金额大于可支取金额，请调整支取金额");else{var a=60;this.msgdisable=!0,m=setInterval(function(){if(0==a)return e.codeText="重新发送",e.msgdisable=!1,void clearInterval(m);a--,e.codeText=a+"s"},1e3),this.getCode()}}else u.a.$emit(r.a.showToast,"支取金额不能为空")},getCode:function(){var e=this.getComState.TEL,t={PHONE_NUM:e,BIZ_TYPE:"1009",AMOUNT:this.money};o.a.common.apiSendPhoneCode(t,function(t){u.a.$emit(r.a.showSendMsg,e)})},focus:function(){this.isFocus=!0},blur:function(){},sure:function(){this.typeShow=!1,this.normalShow=!1,this.show=!0},chooseType:function(e,t){this.cur=e,this.typeText=t.target.innerText,this.typeShow=!1},selectAll:function(){this.isFocus=!0,this.money=this.redeemData.INVEST_AMOUNT},getAgreement:function(){this.$router.push({name:r.e.DocsPage,query:{type:"buy"}})},showPass:function(){var e=this;if(this.money){var t=this.redeemData.INVEST_AMOUNT||0;if(this.money-0>t-0)u.a.$emit(r.a.showToast,"支取金额大于可支取金额，请调整支取金额");else{var a={PHONE_CODE:this.PHONE_CODE,PRD_ID:this.redeemData.PRD_INDEX_ID,APPLY_AMOUNT:this.money,PRD_TYPE:this.redeemData.PRD_TYPE,ORDER_NUM:this.redeemData.ORDER_NUM};o.a.redeem.apiRedemption(a,function(t){var a={BIZ_TYPE:"7",BESHARP_SEQ:t.REQ_SERIAL};e.queryStatus({text:"正在支取中",data:a,fn:function(t,a,s){e.setComState({type:"reload",value:!0}),"1"==t.RES_CODE?(clearInterval(a),u.a.$emit(r.a.showToast,t.RES_MSG),e.$router.push({name:r.e.RedeemFailure,query:{err:t.RES_MSG}})):"0"==t.RES_CODE?(clearInterval(a),u.a.$emit(r.a.showToast,t.RES_MSG),e.Londing.close(),e.setComState({type:"pollResult",value:n()({},t,{money:e.money})}),e.$router.push({name:r.e.RedeemSuccess})):5==s&&(clearInterval(a),u.a.$emit(r.a.showToast,t.RES_MSG),e.$router.push({name:r.e.RedeemFailure,query:{err:t.RES_MSG}}))}})},function(t){e.$router.push({name:r.e.RedeemFailure,query:t})})}}else u.a.$emit(r.a.showToast,"支取金额不能为空")}}},h={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",[s("app-bar",{attrs:{title:"支取"}}),e._v(" "),s("div",{staticClass:"r-top"},[s("img",{attrs:{src:e.imgSrc+e.redeemData.LOGO_URL,alt:""}}),e._v(" "),s("div",[s("p",[e._v(e._s(e.redeemData.PRD_NAME))]),e._v(" "),s("span",[e._v("活期存款")])])]),e._v(" "),s("div",{staticClass:"r-cash"},[s("div",{staticClass:"title"},[e._v("支取金额")]),e._v(" "),s("div",{staticClass:"money"},[s("div",{staticClass:"number"},[s("input",{directives:[{name:"model",rawName:"v-model",value:e.money,expression:"money"}],attrs:{type:"number",placeholder:e.placeholder},domProps:{value:e.money},on:{input:[function(t){t.target.composing||(e.money=t.target.value)},e.inputHandle],focus:e.focus,blur:e.blur}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:!e.ifCheckMoneyEmpty,expression:"!ifCheckMoneyEmpty"}],staticClass:"close-icon",attrs:{src:a("rfOz"),alt:""},on:{click:e.clearNumHandle}})]),e._v(" "),s("div",{staticClass:"all",on:{click:e.selectAll}},[e._v("全部支取")])])]),e._v(" "),e.EFFCT_INTEREST_RATE>0?s("p",{staticClass:"cal"},[e._v("收益"+e._s(e.EFFCT_INTEREST_RATE))]):e._e(),e._v(" "),s("section",{staticClass:"inputAmount"},[s("span",{staticClass:"Amount"},[e._v("\n              验证码\n          ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.PHONE_CODE,expression:"PHONE_CODE"}],attrs:{type:"tel",placeholder:"请输入验证码"},domProps:{value:e.PHONE_CODE},on:{input:function(t){t.target.composing||(e.PHONE_CODE=t.target.value)}}}),e._v(" "),s("button",{staticClass:"button",attrs:{disabled:e.msgdisable},on:{click:e.getMsg}},[e._v(e._s(e.codeText)+"\n    ")])]),e._v(" "),s("button",{class:["r-btn",{active:e.availBtn}],attrs:{disabled:!e.availBtn},on:{click:e.showPass}},[e._v("立即支取")]),e._v(" "),s("p",{class:{bang:!0,no:0==e.agree},on:{click:function(t){e.agree=!e.agree}}},[e._v("我已阅读并同意注册\n    "),s("a",{staticStyle:{color:"#0096FE"},attrs:{href:"javascript:;"},on:{click:function(t){t.stopPropagation(),e.getAgreement()}}},[e._v("《定期存款收益权转让协议》")])])],1)},staticRenderFns:[]};var v=a("VU/8")(d,h,!1,function(e){a("MJgB")},"data-v-5a553c90",null);t.default=v.exports},MJgB:function(e,t){}});
//# sourceMappingURL=69.00f8fdb8fb33766df476.js.map