webpackJsonp([84],{XMwm:function(t,e){},y41y:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("Dd8w"),i=a.n(s),n=a("0jG4"),o=a("EOwk"),r=a("UNnc"),c=a("xJZn"),l=a("MmTA"),_=a("JIj5"),h=a("msXN"),u={data:function(){return{}},created:function(){console.log("JinShang")},methods:{getInfos:function(){var t=this;n.a.safe.apiBandCard({},function(e){t.CARD_BANK_NAME=e.CARD_BANK_NAME,t.CARD_BANK_URL=e.CARD_BANK_URL,t.SINGLE_QUOTA=e.SINGLE_QUOTA,t.DAY_QUOTA=e.DAY_QUOTA;var a=e.CARD_NUM;t.mainBankList.push({logo:e.CARD_BANK_URL,name:e.CARD_BANK_NAME,footNum:a.substr(a.length-4),money:"100",id:t.mainBankList.length+1})})},reChangeHandele:function(){var t=this;n.a.reChange.apiRechargeProtoQuery({},function(e){console.log(e),"N"==e.SIGN_STATE?(t.write=!1,t.page=!1,t.agree1=!1):(t.write=!0,t.agree1=!0)})},clickBank:function(){this.upseletShow=!this.upseletShow}}},g=void 0,d={data:function(){return{show:!1,html:"协议",page:!1,PIN:"",APPLY_AMOUN:"",toUrl:"",ifGet:!1,write:!0,agree:!0,agree1:!0,agreeMentSrc:o.c+"/static/finsuit/js/openapi/js/xieyi/cz.html",ORG_NAME:"",imgSrc:o.g,logo:"",CARD_BANK_NAME:"",CARD_BANK_URL:"",DAY_QUOTA:"",SINGLE_QUOTA:"",msgCode:"",codeText:"获取验证码",disable:!1,upseletShow:!1,mainBankList:[]}},components:{PassInput:r.a,UpSelect:c.a},mixins:[h.a.HandleMixin,h.a.UtilMixin,u],created:function(){this.getInfos();var t=this.getComState.RechargeQuery;console.log("lsData>>",t),this.ORG_NAME=t.ORG_NAME,this.logo=t.LOGO_URL,this.reChangeHandele()},methods:{getCode:function(){var t=this;n.a.reChange.apiRechargeProtoCode({},function(e){console.log(e),t.PIN=e.PIN,t.agree1=!0},function(e){t.codeText="重新发送",t.disable=!1,clearInterval(g)})},getMsg:function(){var t=this;if(!_.a.Check.trim(this.APPLY_AMOUN,"充值金额",!0))if(this.APPLY_AMOUN-0>this.SINGLE_QUOTA-0)l.a.$emit(o.a.showToast,"充值金额大于银行每笔限额规定，请调整充值金额");else if(this.agree){var e=60;this.disable=!0,g=setInterval(function(){if(0==e)return t.codeText="重新发送",t.disable=!1,void clearInterval(g);e--,t.codeText=e+"s"},1e3),this.getCode()}else l.a.$emit(o.a.showToast,"请先同意充值协议")},showPage:function(){this.page=!0},doAgreeHandle:function(){this.agree=!0,this.page=!1},cancel:function(){this.page=!1},checkMoney:function(){this.APPLY_AMOUN-0>this.SINGLE_QUOTA-0&&l.a.$emit(o.a.showToast,"充值金额大于银行每笔限额规定，请调整充值金额")},doNext:function(){var t=this;console.log(this.write),_.a.Check.trim(this.APPLY_AMOUN,"充值金额",!0)||(this.APPLY_AMOUN-0>this.SINGLE_QUOTA-0?l.a.$emit(o.a.showToast,"充值金额大于银行每笔限额规定，请调整充值金额"):this.agree?!this.write&&_.a.Check.trim(this.msgCode,"手机验证码",!0)||(this.agree1?(this.Londing.open(),setTimeout(function(){t.Londing.close(),t.show=!0},1e3)):l.a.$emit(o.a.showToast,"请获取手机验证码")):l.a.$emit(o.a.showToast,"您还未签约充值协议"))},doAgree:function(){this.agree=!this.agree},doReCange:function(){var t=this;if(this.pass=$("#payPass").$getCiphertext(),this.len=$("#payPass").$getPasswordLength(),!_.a.Check.payPassLen(this.len,!0)){this.show=!1;var e={PHONE_CODE:this.msgCode,PIN:this.PIN,BANK_PAY_PW:this.pass,APPLY_AMOUNT:this.APPLY_AMOUN};n.a.reChange.apiRecharge(e,function(e){var a={BIZ_TYPE:"3",BESHARP_SEQ:e.BESHARP_RECHARGE_SEQ};t.queryStatus({text:"正在充值中",data:a,fn:function(a,s,n){t.setComState({type:"reload",value:!0}),"1"==a.RES_CODE?(clearInterval(s),l.a.$emit(o.a.showToast,a.RES_MSG),t.$router.push({name:o.e.RechargeFailure,query:{err:a.RES_MSG}})):"0"==a.RES_CODE?(clearInterval(s),l.a.$emit(o.a.showToast,a.RES_MSG),t.Londing.close(),t.$router.push({name:o.e.RechargeSuccess,query:i()({money:t.APPLY_AMOUN},e)})):5==n&&(clearInterval(s),l.a.$emit(o.a.showToast,a.RES_MSG),t.$router.push({name:o.e.RechargeFailure,query:{err:a.RES_MSG}}))}})},function(e){t.setComState({type:"reload",value:!0}),t.$router.push({name:o.e.RechargeFailure,query:{err:e.RES_MSG}})})}}}},m={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("app-bar",{attrs:{title:"充值"}}),t._v(" "),a("div",{staticClass:"rechargetitle"},[t._v("充值到"+t._s(t.ORG_NAME)+"直销银行")]),t._v(" "),a("div",{staticClass:"minshengbank"},[a("span",{staticClass:"minshengbankLogo"},[a("img",{staticStyle:{width:"75%"},attrs:{src:t.imgSrc+t.logo,alt:""}})]),t._v("\n    "+t._s(t.ORG_NAME)+"\n  ")]),t._v(" "),a("div",{staticClass:"rechargetitle"},[t._v("银行卡")]),t._v(" "),a("div",{staticClass:"minshengbank",staticStyle:{"border-bottom":"1px solid #EEEEF0"},on:{click:t.clickBank}},[a("span",{staticClass:"minshengbankLogo",staticStyle:{"padding-top":"10px"}},[a("img",{staticStyle:{width:"75%"},attrs:{src:t.imgSrc+t.CARD_BANK_URL,alt:""}})]),t._v("\n    "+t._s(t.CARD_BANK_NAME)+"\n  ")]),t._v(" "),a("div",{staticClass:"money"},[a("p",[t._v("每笔限额："+t._s(t._f("formatNum")(t.SINGLE_QUOTA))+"元")]),t._v(" "),a("p",[t._v("每日限额："+t._s(t._f("formatNum")(t.DAY_QUOTA))+"元")])]),t._v(" "),a("section",{staticClass:"inputAmount",staticStyle:{"border-top":".4rem solid #f6f6f6"}},[a("span",{staticClass:"Amount"},[t._v("金额")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.APPLY_AMOUN,expression:"APPLY_AMOUN"}],attrs:{type:"number",placeholder:"请输入金额"},domProps:{value:t.APPLY_AMOUN},on:{change:t.checkMoney,input:function(e){e.target.composing||(t.APPLY_AMOUN=e.target.value)}}})]),t._v(" "),t.write?t._e():a("section",{staticClass:"inputAmount"},[a("span",{staticClass:"Amount"},[t._v("\n              验证码\n          ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.msgCode,expression:"msgCode"}],attrs:{type:"text",placeholder:"请填写短信验证码"},domProps:{value:t.msgCode},on:{input:function(e){e.target.composing||(t.msgCode=e.target.value)}}}),t._v(" "),a("button",{staticClass:"button",attrs:{disabled:t.disable},on:{click:t.getMsg}},[t._v(t._s(t.codeText)+"\n    ")])]),t._v(" "),a("button",{staticClass:"tijiao",on:{click:t.doNext}},[t._v("确认充值")]),t._v(" "),t.write?t._e():a("p",{class:{bang:!0,no:0==t.agree},on:{click:t.doAgree}},[t._v("我已阅读并同意"),a("span",{staticStyle:{color:"#0096FE"},on:{click:function(e){return e.stopPropagation(),t.showPage(e)}}},[t._v("《充值协议》")])]),t._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:t.page,expression:"page"}],staticClass:"page"},[a("div",{staticClass:"docs"},[a("iframe",{staticClass:"indocs",attrs:{src:t.agreeMentSrc}})]),t._v(" "),a("div",{staticClass:"btn"},[a("mt-button",{attrs:{type:"primary"},on:{click:t.cancel}},[t._v("取消")]),t._v(" "),a("mt-button",{attrs:{type:"primary"},on:{click:t.doAgreeHandle}},[t._v("确认")])],1)]),t._v(" "),t.show?a("section",{staticClass:"bgbox"},[a("section",{staticClass:"passbox"},[t._m(0),t._v(" "),a("section",{staticClass:"field_row_wrap"},[a("p",{staticClass:"field_row_key"},[t._v("\n          交易密码\n        ")]),t._v(" "),a("div",{staticClass:"field_row_value"},[a("pass-input",{attrs:{inputID:"payPass"}})],1),t._v(" "),a("p",{staticClass:"info"},[t._v("密码由数字组成，必须为6位")])]),t._v(" "),a("div",{staticClass:"btn"},[a("mt-button",{attrs:{type:"primary"},on:{click:function(e){t.show=!t.show}}},[t._v("取消")]),t._v(" "),a("mt-button",{attrs:{type:"primary"},on:{click:t.doReCange}},[t._v("提交")])],1)])]):t._e(),t._v(" "),a("up-select",{attrs:{show:t.upseletShow,BankList:t.mainBankList}})],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("img",{attrs:{src:a("j732"),alt:""}}),this._v("\n        由晋商银行提供技术保障")])}]};var p=a("VU/8")(d,m,!1,function(t){a("XMwm")},"data-v-44e193cd",null);e.default=p.exports}});
//# sourceMappingURL=84.65d48cef7ea6530a0b02.js.map