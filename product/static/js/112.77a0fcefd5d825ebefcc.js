webpackJsonp([112],{rGtS:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("0jG4"),i=s("EOwk"),n=s("UNnc"),o=s("MmTA"),r=s("JIj5"),c={data:function(){return{show:!1,money:null,datas:{},imgSrc:i.g,toUrl:"",pass:"",len:0,banck:""}},mixins:[s("msXN").a.HandleMixin],components:{PassInput:n.a},created:function(){this.datas=this.$route.query},methods:{getAgreement:function(t){this.$router.push({name:i.e.DocsPage,query:{type:t,id:this.datas.id}})},buyHandle:function(){var t=this;this.Londing.open(),setTimeout(function(){t.show=!0,t.Londing.close()},500)},doPay:function(){var t=this;this.pass=$("#payPass").$getCiphertext(),this.len=$("#payPass").$getPasswordLength();var a={PRD_ID:this.datas.id+"",APPLY_AMOUNT:this.datas.money+"",BANK_PAY_PW:this.pass+""};r.a.Check.payPassLen(this.len,!0)||(this.show=!1,e.a.buy.apiBuy(a,function(a){var s={BIZ_TYPE:"6",BESHARP_SEQ:a.BESHARP_BUY_SEQ};t.Londing.open({text:"正在购买中"});var n=1,r=setInterval(function(){n++,e.a.query.apiQueryBizStatus(s,function(s){if(console.log(s.RES_CODE),t.setComState({type:"reload",value:!0}),"1"==s.RES_CODE&&5==n)t.Londing.close(),clearInterval(r),o.a.$emit(i.a.showToast,s.RES_MSG),t.$router.push({name:i.e.BuyFailed,query:{err:s.RES_MSG}});else{if("0"==s.RES_CODE)return clearInterval(r),o.a.$emit(i.a.showToast,s.RES_MSG),t.Londing.close(),void t.$router.push({name:i.e.BuySuccess,query:{money:t.datas.money,PRD_NAME:t.datas.PRD_NAME,ORG_NAME:t.datas.ORG_NAME,OPERA_DATE:a.OPERA_DATE,BESHARP_BUY_SEQ:a.BESHARP_BUY_SEQ}});if(n>5)return o.a.$emit(i.a.showToast,s.RES_MSG),void t.$router.push({name:i.e.BuyFailed,query:{err:s.RES_MSG}})}})},2e3)},function(a){t.Londing.close(),t.setComState({type:"reload",value:!0}),t.$router.push({name:i.e.BuyFailed,query:{err:a.RES_MSG}})}))}}},l={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"app"},[s("app-bar",{attrs:{title:"购买"}}),t._v(" "),s("div",{staticClass:"buytitle",staticStyle:{padding:"0 0.4rem"}},[s("div",[s("div",{staticClass:"buytitleleftimg"},[s("img",{staticStyle:{width:"100%"},attrs:{src:t.imgSrc+t.datas.logo,alt:""}})]),t._v(" "),s("div",{staticClass:"buytitleleftcontent"},[s("p",[t._v(t._s(t.datas.PRD_NAME))]),t._v(" "),s("p",{staticStyle:{color:"#666"}},[t._v("理财产品")])])])]),t._v(" "),s("div",{staticClass:"buytitlemoney"},[s("p",{staticClass:"buytitlemoneyjine"},[t._v("购买金额")]),t._v(" "),s("p",{staticClass:"buytitlemoneyshu"},[t._v(" ￥ "+t._s(t.datas.money))])]),t._v(" "),s("div",{staticClass:"jiaoyibank"},[s("div",{staticClass:"jiaoyibankname"},[t._v("交易银行")]),t._v(" "),s("div",{staticClass:"jiaoyibankzhixiaoname"},[t._v(t._s(t.datas.ORG_NAME))])]),t._v(" "),s("mt-button",{staticClass:"tijiao",on:{click:t.buyHandle}},[t._v("确认购买")]),t._v(" "),s("p",{staticClass:"bang"},[t._v("我已阅读并同意注册\n    "),s("a",{staticStyle:{color:"#0096FE"},attrs:{href:"javascript:;"},on:{click:function(a){t.getAgreement("S")}}},[t._v("《投融资平台服务协议（投资人版）》")]),t._v(" "),s("a",{staticStyle:{color:"#0096FE"},attrs:{href:"javascript:;"},on:{click:function(a){t.getAgreement("B")}}},[t._v('《晋商银行直销银行"安鑫富"投融资协议》')])]),t._v(" "),t.show?s("section",{staticClass:"bgbox"},[s("section",{staticClass:"passbox"},[t._m(0),t._v(" "),s("section",{staticClass:"field_row_wrap"},[s("p",{staticClass:"field_row_key"},[t._v("\n          交易密码\n        ")]),t._v(" "),s("div",{staticClass:"field_row_value"},[s("pass-input",{attrs:{inputID:"payPass"}})],1),t._v(" "),s("p",{staticClass:"info"},[t._v("密码由数字组成，必须为6位")])]),t._v(" "),s("div",{staticClass:"btn"},[s("mt-button",{attrs:{type:"primary"},on:{click:function(a){t.show=!t.show}}},[t._v("取消")]),t._v(" "),s("mt-button",{attrs:{type:"primary"},on:{click:t.doPay}},[t._v("提交")])],1)])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("p",{staticClass:"title"},[a("img",{attrs:{src:s("j732"),alt:""}}),this._v("\n        由晋商银行提供技术保障")])}]};var _=s("VU/8")(c,l,!1,function(t){s("sJi+")},"data-v-15bf2dfa",null);a.default=_.exports},"sJi+":function(t,a){}});
//# sourceMappingURL=112.77a0fcefd5d825ebefcc.js.map