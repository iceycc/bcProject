{"version":3,"sources":["webpack:///src/views/ZhongBang/safe/ResetPhone.vue","webpack:///./src/views/ZhongBang/safe/ResetPhone.vue?164a","webpack:///./src/views/ZhongBang/safe/ResetPhone.vue"],"names":["ResetPhone","name","components","ActiveInput","ErrMsg","data","ID_CARD","errMsg","params","PHONE_NUM","PHONE_CODE","MESSAGE_TOKEN","tel","disable","codeText","time","watch","created","this","$store","getters","GET_COMMON_STATE","infos","methods","goNext","_this","console","log","msg","util","Check","showErrMsg","service","safe","apiChangePhoneNum","res","bus","$emit","Constant","showToast","removeComState","setComState","type","value","BankDetail","$router","push","Login","err","_this2","setTimeout","getMsgCode","_this3","sTime","timer","setInterval","clearInterval","BIZ_TYPE","open","safe_ResetPhone","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","_s","check-type","valuePlaceholder","max","model","callback","$$v","expression","$set","slot","disabled","on","click","classStyle","_m","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/109.a8b049ee567375bb3845.js","sourcesContent":["<template>\n  <div>\n    <app-bar title=\"修改手机号\"></app-bar>\n    <section class=\"m-form\">\n      <section class=\"m-line\">\n        <span class=\"n-left\">原手机号</span>\n        <span class=\"n-right\">{{tel}}</span>\n      </section>\n      <active-input check-type=\"number\" valuePlaceholder=\"身份证号\"\n                    max='11'\n                    v-model=\"ID_CARD\" type=\"tel\"></active-input>\n      <active-input check-type=\"number\" valuePlaceholder=\"新手机号码\"\n                    max='11'\n                    v-model=\"PHONE_NUM\" type=\"tel\"></active-input>\n      <active-input valuePlaceholder=\"验证码\" v-model=\"params.PHONE_CODE\">\n        <template slot=\"btn\">\n          <button class=\"slot\" @click=\"getMsgCode\" :disabled=\"disable\">{{codeText}}</button>\n        </template>\n      </active-input>\n      <section class=\"submit-box\">\n        <err-msg :errMsg=\"errMsg\" classStyle=\"err-msg\"></err-msg>\n        <button class=\"submit-btn\" @click=\"goNext\">下一步</button>\n      </section>\n      <section class=\"foot-text\">\n        <p>温馨提示：</p>\n        <p>更换手机号之前，请您确认新手机号与绑定的银行卡的预留手机号相同，如果不同请先更换绑定银行卡的预留手机号。</p>\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\n  import ActiveInput from '@/components/commons/ActiveInput'\n  import ErrMsg from '@/components/commons/ErrMsg'\n  import API from \"@/service\";\n  import Bus from '@/plugin/bus'\n  import {PageName, BusName, LsName} from \"@/Constant\";\n  import util from \"libs/util\";\n  import Mixins from \"@/mixins\";\n\n  export default {\n    name: \"ResetPhone\",\n    components: {\n      ActiveInput,\n      ErrMsg\n    },\n    data() {\n      return {\n        ID_CARD:'',\n        errMsg: '',\n        params: {\n          PHONE_NUM: '',\n          PHONE_CODE: '',\n          MESSAGE_TOKEN: ''\n        },\n        PHONE_NUM: '',\n        tel: '',\n        disable: false,\n        codeText: '获取验证码',\n        time: 60\n      }\n    },\n    watch: {},\n    created() {\n      // this.tel = util.storage.session.get(LsName.Infos).PHONE_NUM\n      this.tel = this.$store.getters.GET_COMMON_STATE.infos\n    },\n    methods: {\n      goNext() {\n        console.log(this.PHONE_NUM);\n        let msg;\n        this.params.PHONE_NUM = this.PHONE_NUM\n        if (msg = util.Check.tel(this.params.PHONE_NUM)) {\n          this.showErrMsg(msg)\n          return\n        }\n        if (!this.params.MESSAGE_TOKEN) {\n          this.showErrMsg('请获取短信验证码')\n          return\n        }\n        if (!this.params.PHONE_CODE) {\n          this.showErrMsg('请填写短信验证码')\n          return\n        }\n        let data = {\n          PHONE_NUM: this.params.PHONE_NUM,\n          PHONE_CODE: this.params.PHONE_CODE,\n          MESSAGE_TOKEN: this.params.MESSAGE_TOKEN,\n        }\n        API.safe.apiChangePhoneNum(data, true, res => {\n          Bus.$emit(BusName.showToast, '更换手机号成功，请重新登陆')\n          // 是否应该\n\n          this.removeComState('TOKEN')\n          this.removeComState('Infos')\n\n          this.setComState({type: 'loginType', value: PageName.BankDetail})\n          this.$router.push({\n            name: PageName.Login\n          })\n        }, err => {\n          this.showErrMsg(err)\n        })\n      },\n      showErrMsg(msg) {\n        this.errMsg = msg;\n        setTimeout(() => {\n          this.errMsg = '';\n        }, 2000)\n      },\n      // 15621118888\n      getMsgCode() {\n        let sTime = this.time\n        this.disable = true\n        let timer = setInterval(() => {\n          if (sTime == 0) {\n            this.codeText = '重新发送'\n            this.disable = false\n            clearInterval(timer)\n            return\n          }\n          sTime--\n          this.codeText = `${sTime}s`\n        }, 1000)\n        let data = {\n          PHONE_NUM: this.tel + '',\n          BIZ_TYPE: '10', //\n        }\n        API.open.getMsgCode(data, res => {\n          Bus.$emit(BusName.showToast, '验证码发送成功')\n          this.params.MESSAGE_TOKEN = res.MESSAGE_TOKEN\n        }, err => {\n          clearInterval(timer)\n          this.codeText = '重新发送'\n          this.disable = false\n          console.log(err);\n        })\n      },\n\n    },\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"~@/assets/px2rem\";\n\n  .m-form {\n    width: 100%;\n    box-sizing: border-box;\n    padding: 0 px2rem(20);\n  }\n\n  .m-line {\n    display: flex;\n    box-sizing: border-box;\n    line-height: px2rem(42);\n    background-size: 0.7rem 0.7rem;\n    border-bottom: 1px #E5E5E5 solid;\n    font-size: px2rem(14);\n    .n-left {\n      flex: 1;\n    }\n    .n-right {\n      color: #8e8e8e\n    }\n  }\n\n  .slot {\n    position: absolute;\n    display: inline-block;\n    z-index: 3;\n    bottom: px2rem(8);\n    right: 0;\n    border: 1px solid #2B74FE;\n    color: #2B74FE;\n    width: px2rem(80);\n    height: px2rem(25);\n    border-radius: px2rem(6);\n  }\n\n  .submit-box {\n    position: relative;\n    padding-top: px2rem(60);\n  }\n\n  .submit-btn {\n    display: block;\n    font-size: px2rem(16);\n    color: #fff;\n    background-color: #508CEE;\n    border-radius: px2rem(4);\n    line-height: 1rem;\n    width: px2rem(255);\n    height: px2rem(44);\n    margin: 0 auto;\n    text-align: center;\n    border: none;\n    outline: none;\n  }\n\n  .err-msg {\n    position: absolute;\n    top: px2rem(0);\n    left: 50%;\n    transform: translateX(-50%);\n  }\n\n  .foot-text {\n    color: #8e8e8e;\n    padding-top: px2rem(20);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/ZhongBang/safe/ResetPhone.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('app-bar',{attrs:{\"title\":\"修改手机号\"}}),_vm._v(\" \"),_c('section',{staticClass:\"m-form\"},[_c('section',{staticClass:\"m-line\"},[_c('span',{staticClass:\"n-left\"},[_vm._v(\"原手机号\")]),_vm._v(\" \"),_c('span',{staticClass:\"n-right\"},[_vm._v(_vm._s(_vm.tel))])]),_vm._v(\" \"),_c('active-input',{attrs:{\"check-type\":\"number\",\"valuePlaceholder\":\"身份证号\",\"max\":\"11\",\"type\":\"tel\"},model:{value:(_vm.ID_CARD),callback:function ($$v) {_vm.ID_CARD=$$v},expression:\"ID_CARD\"}}),_vm._v(\" \"),_c('active-input',{attrs:{\"check-type\":\"number\",\"valuePlaceholder\":\"新手机号码\",\"max\":\"11\",\"type\":\"tel\"},model:{value:(_vm.PHONE_NUM),callback:function ($$v) {_vm.PHONE_NUM=$$v},expression:\"PHONE_NUM\"}}),_vm._v(\" \"),_c('active-input',{attrs:{\"valuePlaceholder\":\"验证码\"},model:{value:(_vm.params.PHONE_CODE),callback:function ($$v) {_vm.$set(_vm.params, \"PHONE_CODE\", $$v)},expression:\"params.PHONE_CODE\"}},[_c('template',{slot:\"btn\"},[_c('button',{staticClass:\"slot\",attrs:{\"disabled\":_vm.disable},on:{\"click\":_vm.getMsgCode}},[_vm._v(_vm._s(_vm.codeText))])])],2),_vm._v(\" \"),_c('section',{staticClass:\"submit-box\"},[_c('err-msg',{attrs:{\"errMsg\":_vm.errMsg,\"classStyle\":\"err-msg\"}}),_vm._v(\" \"),_c('button',{staticClass:\"submit-btn\",on:{\"click\":_vm.goNext}},[_vm._v(\"下一步\")])],1),_vm._v(\" \"),_vm._m(0)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"foot-text\"},[_c('p',[_vm._v(\"温馨提示：\")]),_vm._v(\" \"),_c('p',[_vm._v(\"更换手机号之前，请您确认新手机号与绑定的银行卡的预留手机号相同，如果不同请先更换绑定银行卡的预留手机号。\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-1d751185\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ZhongBang/safe/ResetPhone.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-1d751185\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ResetPhone.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ResetPhone.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ResetPhone.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-1d751185\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ResetPhone.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-1d751185\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ZhongBang/safe/ResetPhone.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}