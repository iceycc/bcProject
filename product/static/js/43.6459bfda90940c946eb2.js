webpackJsonp([43],{PYP2:function(t,a,s){"use strict";Object.defineProperty(a,"__esModule",{value:!0});var e=s("0jG4"),i=s("EOwk"),n=s("b1t1"),o=s("MmTA"),c=s("JIj5"),r={data:function(){return{show:!1,money:null,datas:{},imgSrc:i.g,toUrl:"",pass:"",len:0,banck:""}},mixins:[s("msXN").a.HandleMixin],components:{PassWordZhengzhou:n.a},created:function(){this.datas=this.$route.query},methods:{getAgreement:function(t){this.$router.push({name:i.e.DocsPage,query:{type:t,id:this.datas.id}})},buyHandle:function(){var t=this;this.Londing.open(),setTimeout(function(){t.show=!0,t.Londing.close()},500)},polling:function(t){var a=this,s={BIZ_TYPE:"6",BESHARP_SEQ:t.BESHARP_BUY_SEQ};this.Londing.open({text:"正在购买中"});var n=1,c=setInterval(function(){n++,e.a.common.apiQueryBizStatus(s,function(s){if("1"==s.RES_CODE||5==n)a.Londing.close(),clearInterval(c),o.a.$emit(i.a.showToast,s.RES_MSG),a.$router.push({name:i.e.BuyFailed,query:{err:s.RES_MSG}});else{if("0"==s.RES_CODE){clearInterval(c),o.a.$emit(i.a.showToast,s.RES_MSG),a.Londing.close();var e={money:a.datas.money,PRD_NAME:a.datas.PRD_NAME,ORG_NAME:a.datas.ORG_NAME,OPERA_DATE:t.OPERA_DATE,BESHARP_BUY_SEQ:t.BESHARP_BUY_SEQ,EXPECT_PROFIT_DATE:""};return a.setComState({type:"buyData",value:e}),void a.$router.push({name:i.e.BuySuccess})}if(n>5)return o.a.$emit(i.a.showToast,s.RES_MSG),void a.$router.push({name:i.e.BuyFailed,query:{err:s.RES_MSG}})}})},2e3)},doPay:function(){var t=this;this.pass=$("#payPasscc").getKBD(),this.len=$("#payPasscc").getLenKBD();var a=$("#payPasscc").getBDCode(),s={TYPE:"API_BUY",PRD_ID:this.datas.id+"",APPLY_AMOUNT:c.a.fromatMoney(this.datas.money),BANK_PAY_PW:this.pass+"",PREFIX:a,FUN_TYPE:"1",ORDER_TYPE:"1"};c.a.Check.payPassLen(this.len,!0)||(this.show=!1,e.a.buy.apiBuy(s,function(a){t.polling(a)},function(a){t.Londing.close(),t.$router.push({name:i.e.BuyFailed,query:{err:a.RES_MSG}})}))}}},l={render:function(){var t=this,a=t.$createElement,s=t._self._c||a;return s("div",{staticClass:"app"},[s("app-bar",{attrs:{title:"购买"}}),t._v(" "),s("div",{staticClass:"buytitle",staticStyle:{padding:"0 0.4rem"}},[s("div",[s("div",{staticClass:"buytitleleftimg"},[s("img",{staticStyle:{width:"100%"},attrs:{src:t.imgSrc+t.datas.logo,alt:""}})]),t._v(" "),s("div",{staticClass:"buytitleleftcontent"},[s("p",[t._v(t._s(t.datas.PRD_NAME))]),t._v(" "),s("p",{staticStyle:{color:"#666"}},[t._v("理财产品")])])])]),t._v(" "),s("div",{staticClass:"buytitlemoney"},[s("p",{staticClass:"buytitlemoneyjine"},[t._v("购买金额")]),t._v(" "),s("p",{staticClass:"buytitlemoneyshu"},[t._v(" ￥ "+t._s(t.datas.money))])]),t._v(" "),s("div",{staticClass:"jiaoyibank"},[s("div",{staticClass:"jiaoyibankname"},[t._v("交易银行")]),t._v(" "),s("div",{staticClass:"jiaoyibankzhixiaoname"},[t._v(t._s(t.datas.ORG_NAME))])]),t._v(" "),s("mt-button",{staticClass:"tijiao",on:{click:t.buyHandle}},[t._v("确认购买")]),t._v(" "),s("p",{staticClass:"bang"},[t._v("我已阅读并同意注册\n    "),s("a",{staticStyle:{color:"#0096FE"},attrs:{href:"javascript:;"},on:{click:function(a){t.getAgreement("S")}}},[t._v("《投融资平台服务协议（投资人版）》")]),t._v(" "),s("a",{staticStyle:{color:"#0096FE"},attrs:{href:"javascript:;"},on:{click:function(a){t.getAgreement("B")}}},[t._v('《郑州银行直销银行"安鑫富"投融资协议》')])]),t._v(" "),t.show?s("section",{staticClass:"bgbox"},[s("section",{staticClass:"passbox"},[t._m(0),t._v(" "),s("section",{staticClass:"field_row_wrap"},[s("p",{staticClass:"field_row_key"},[t._v("\n          交易密码\n        ")]),t._v(" "),s("div",{staticClass:"field_row_value"},[s("pass-word-zhengzhou",{attrs:{BankCardPass:"payPasscc"}})],1),t._v(" "),s("p",{staticClass:"info"},[t._v("密码由数字组成，必须为6位")])]),t._v(" "),s("div",{staticClass:"btn"},[s("mt-button",{attrs:{type:"primary"},on:{click:function(a){t.show=!t.show}}},[t._v("取消")]),t._v(" "),s("mt-button",{attrs:{type:"primary"},on:{click:t.doPay}},[t._v("提交")])],1)])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,a=this._self._c||t;return a("p",{staticClass:"title"},[a("img",{attrs:{src:s("j732"),alt:""}}),this._v("\n        由郑州银行提供技术保障")])}]};var _=s("VU/8")(r,l,!1,function(t){s("avB9")},"data-v-8bbb5784",null);a.default=_.exports},avB9:function(t,a){}});
//# sourceMappingURL=43.6459bfda90940c946eb2.js.map