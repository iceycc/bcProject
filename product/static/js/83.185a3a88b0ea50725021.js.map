{"version":3,"sources":["webpack:///src/views/ZhongBang/safe/ChangeBank.vue","webpack:///./src/views/ZhongBang/safe/ChangeBank.vue?4ef8","webpack:///./src/views/ZhongBang/safe/ChangeBank.vue"],"names":["ChangeBank","name","components","BankSelect","ActiveInput","ErrMsg","data","bankText","bankList","AllBankListObj","errMsg","bankNo","bankNameToNo","params","ifGet","OldBankInfo","mixins","HandleMixin","created","_this","this","getErrMsg","beforeInfo","msg","getBankList","getOldBankInfo","$store","getters","GET_COMMON_STATE","Infos","watch","n","o","checkBankName","methods","getComState","hasCardList","console","log","getBank","val","fn","replace","bankName","i","machBankName","slice","checkBankNo","toString","showErrMsg","length","pin","_this2","service","list","apiGetBankCardList","res","obj","BAND_CARD_LIST","forEach","item","BANK_CARD_BIN","BANK_NAME","SUPPORT_BANK_LIST","map","value","src","Constant","BANK_LOGO_URL","Index","INITIAL","_this3","setTimeout","checkBankType","subumit","_this4","PHONE_NUM","OLD_ACCOUNT_NO","CARD_NO","NEW_ACCOUNT_NO","BANK_NO","safe","apiChangeBingCard","bus","$emit","showToast","$router","push","MoreService","err","ifShow","setErrMsg","window","location","reload","goNext","safe_ChangeBank","render","_vm","_h","$createElement","_c","_self","attrs","title","_v","staticClass","text","options","on","getValue","check-type","valuePlaceholder","max","model","callback","$$v","expression","classStyle","click","_m","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/83.185a3a88b0ea50725021.js","sourcesContent":["<template>\n  <div>\n    <app-bar title=\"更换银行卡\"></app-bar>\n    <section class=\"m-form\">\n      <section class=\"bank\">\n        <span class=\"n-left\">选择银行</span>\n        <!--<input type=\"text\" name=\"back\" placeholder=\" 请选择银行\" v-model=\"data.ORG_ID\">-->\n        <!-- <span  class=\"limit\">银行限额</span>  -->\n        <Bank-select class=\"bank-box\" :text=\"bankText\" :options=\"bankList\" @getValue=\"getBank\"\n                     title=\"银行列表\"></Bank-select>\n\n      </section>\n      <active-input check-type=\"number\" valuePlaceholder=\"新绑定卡卡号\" v-model=\"bankNo\" max=\"20\"></active-input>\n      <section class=\"submit-box\">\n        <err-msg :errMsg=\"errMsg\" classStyle=\"err-msg\"></err-msg>\n        <button class=\"submit-btn\" @click=\"goNext\">下一步</button>\n      </section>\n      <section class=\"foot-text\">\n        <p>温馨提示：</p>\n        <p>1.请您确认新绑定银行卡在银行绑定的手机号与旧卡 绑定手机号相同。</p>\n        <p>2.更换绑定银行卡前，请转出所有的投资资金并提现</p>\n      </section>\n    </section>\n  </div>\n</template>\n\n<script>\n  import BankSelect from '@/components/commons/BankSelect'\n  import ActiveInput from '@/components/commons/ActiveInput'\n  import ErrMsg from '@/components/commons/ErrMsg'\n  import API from \"@/service\";\n  import {imgSrc, BusName, LsName, PageName} from \"@/Constant\";\n  import Bus from '@/plugin/bus'\n  import util from \"libs/util\";\n  // import {HandleMixin,} from '@/mixins'\n  import Mixins from \"@/mixins\";\n\n\n  export default {\n    name: \"changeBank\",\n    components: {\n      BankSelect,\n      ActiveInput,\n      ErrMsg,\n    },\n    data() {\n      return {\n        bankText: '请选择银行',\n        bankList: [],\n        AllBankListObj: {},\n        errMsg: '',\n        bankNo: '',\n        bankNameToNo: false,\n        params: {},\n        ifGet: false,\n\n        OldBankInfo: {}\n\n      }\n    },\n    mixins: [Mixins.HandleMixin],\n    created() {\n      this.getErrMsg((beforeInfo) => {\n        this.errMsg = beforeInfo.msg\n      })\n\n      this.getBankList()\n      this.getOldBankInfo()\n      // this.params = util.storage.session.get(LsName.Infos)\n      this.params = this.$store.getters.GET_COMMON_STATE.Infos\n    },\n    watch: {\n      bankNo(n, o) {\n        this.checkBankName(this.bankNo)\n      },\n      bankText(n, o) {\n        this.checkBankName(this.bankNo)\n      }\n    },\n    methods: {\n      getOldBankInfo() {\n        this.OldBankInfo = this.getComState.Infos.hasCardList[0]\n        console.log(this.OldBankInfo);\n      },\n      getBank(val) {\n        this.bankText = val.name\n      },\n      checkBankName(val, fn) {\n        this.bankNameToNo = false\n        val = val.replace(/\\s+/g, \"\")\n        let bankName\n        for (var i = 3; i < 10; i++) {\n          if (bankName = this.machBankName((val + '').slice(0, i))) {\n            if (bankName != this.bankText) {\n              return\n            }\n            this.bankNameToNo = true\n            break\n          }\n        }\n      },\n      checkBankNo(val) {\n        val = val.toString()\n        if (this.bankText == '请选择银行') {\n          this.showErrMsg('请选择银行')\n          return true\n        }\n        if (val == '') {\n          this.showErrMsg('银行卡号不能为空')\n          return true\n        }\n        else if (val.length < 15 || val.length > 19) {\n          this.showErrMsg('银行卡号有误，请确认后再次输入')\n          return true\n        }\n        else {\n          this.checkBankName(val)\n          return false\n        }\n\n      },\n      machBankName(pin) {\n        return this.AllBankListObj[pin]\n      },\n      getBankList() {\n        API.list.apiGetBankCardList({}, res => {\n          let obj = {}\n          res.BAND_CARD_LIST.forEach(item => {\n            obj[item.BANK_CARD_BIN] = item.BANK_NAME\n          })\n          // console.log('bankObj>>>',obj);\n          // 全部银行\n          this.AllBankListObj = obj\n          // 支持的银行\n          this.bankList = res.SUPPORT_BANK_LIST.map((item) => {\n            return {\n              name: item.BANK_NAME,\n              value: 0,\n              src: imgSrc + item.BANK_LOGO_URL,\n              Index: item.INITIAL\n            }\n          })\n        })\n      },\n      showErrMsg(msg) {\n        this.errMsg = msg;\n        setTimeout(() => {\n          this.errMsg = '';\n        }, 4000)\n      },\n      checkBankType(){\n\n      },\n      subumit() {\n\n        let data = {\n          // TYPE\t请求类型\n          // ORG_ID\t机构ID\n          // PHONE_NUM\t银行卡预留手机号码\n          // OLD_ACCOUNT_NO\t旧银行卡号\n          // NEW_ACCOUNT_NO\t新银行卡号\n          // BANK_NO  绑定银行卡银行行号\n          // CARD_BIN  新卡卡bin\n          // BANK_INNER  本行卡还是他行卡\n          // OPEN_BANK  开户行名称\n          PHONE_NUM: this.OldBankInfo.PHONE_NUM,\n          OLD_ACCOUNT_NO:this.OldBankInfo.CARD_NO,\n          NEW_ACCOUNT_NO: this.bankNo,\n          BANK_NO:''\n        }\n        let delMsg = true\n\n        API.safe.apiChangeBingCard(data, delMsg, res => {\n          Bus.$emit(BusName.showToast, '更换银行卡成功')\n          this.$router.push({\n            name: PageName.MoreService\n          })\n        }, err => {\n          console.log('err>>>>>>>>1111', err);\n          this.errMsg = err\n          this.ifShow = false\n          this.setErrMsg({\n            msg: err\n          })\n          // util.storage.session.set('ChangeBankInfo', {\n          //     msg: err\n          // })\n          setTimeout(() => {\n            window.location.reload()\n          }, 500)\n        })\n      },\n      goNext() {\n        if (this.checkBankNo(this.bankNo)) return\n        console.log('goNext>>', this.bankNameToNo);\n        if (!this.bankNameToNo) {\n          this.showErrMsg('银行卡和银行名称不匹配')\n        } else {\n          this.subumit()\n        }\n\n      }\n    },\n\n  }\n</script>\n\n<style lang=\"scss\" scoped>\n  @import \"~@/assets/px2rem\";\n\n  .m-form {\n    width: 100%;\n    box-sizing: border-box;\n    padding: 0 px2rem(20);\n  }\n\n  .bank {\n    display: flex;\n    box-sizing: border-box;\n    line-height: px2rem(42);\n    background-size: 0.7rem 0.7rem;\n    border-bottom: 1px #E5E5E5 solid;\n    .n-left {\n      font-size: px2rem(14);\n      width: px2rem(60);\n    }\n    .bank-box {\n      width: px2rem(150);\n      box-sizing: border-box;\n      vertical-align: middle;\n    }\n  }\n\n  .submit-box {\n    position: relative;\n    padding-top: px2rem(30);\n  }\n\n  .submit-btn {\n    display: block;\n    font-size: px2rem(16);\n    color: #fff;\n    background-color: #508CEE;\n    border-radius: px2rem(4);\n    line-height: 1rem;\n    width: px2rem(255);\n    height: px2rem(44);\n    margin: px2rem(20) auto 0;\n    text-align: center;\n    border: none;\n    outline: none;\n  }\n\n  .err-msg {\n    /*position: absolute;*/\n    /*top: px2rem(0);*/\n    /*left: 50%;*/\n    /*transform: translateX(-50%);*/\n  }\n\n  .foot-text {\n    color: #8e8e8e;\n    padding-top: px2rem(20);\n  }\n\n  .bgbox {\n    width: 100%;\n    height: 100%;\n    background: rgba(1, 1, 1, .7);\n    position: absolute;\n    padding-top: 0.7rem;\n    top: 0;\n    left: 0;\n    z-index: 3;\n    .passbox {\n      background: #fff;\n      width: 80%;\n      margin: 0 auto;\n      box-sizing: border-box;\n    }\n    .top {\n      padding: 0.4rem;\n    }\n    .field_row_key {\n      font-size: 0.4rem;\n    }\n    .title {\n      margin-bottom: 0.5rem;\n      text-align: center;\n      font-size: 0.4rem;\n      color: #666;\n      height: .6rem;\n      line-height: .6rem;\n      img {\n        vertical-align: top;\n        width: .5rem;\n      }\n    }\n    .field_row_wrap {\n      margin-bottom: 0.2rem;\n    }\n    .field_row_value {\n      border-radius: px2rem(4);\n      border: 1px solid #DDD;\n      height: px2rem(34);\n      line-height: px2rem(34);\n      padding-left: px2rem(3);\n      margin: 0.2rem 0;\n    }\n    .info {\n      font-size: 0.3rem;\n      line-height: 0.6rem;\n      color: #aeaeae;\n    }\n    .btn {\n      border-top: 1px solid #efefef;\n      padding: px2rem(14) 0;\n      display: flex;\n      button {\n        color: #108EE9;\n        font-size: px2rem(17);\n        margin: 0 .3rem;\n        text-align: center;\n        flex: 1;\n      }\n    }\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/ZhongBang/safe/ChangeBank.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',[_c('app-bar',{attrs:{\"title\":\"更换银行卡\"}}),_vm._v(\" \"),_c('section',{staticClass:\"m-form\"},[_c('section',{staticClass:\"bank\"},[_c('span',{staticClass:\"n-left\"},[_vm._v(\"选择银行\")]),_vm._v(\" \"),_c('Bank-select',{staticClass:\"bank-box\",attrs:{\"text\":_vm.bankText,\"options\":_vm.bankList,\"title\":\"银行列表\"},on:{\"getValue\":_vm.getBank}})],1),_vm._v(\" \"),_c('active-input',{attrs:{\"check-type\":\"number\",\"valuePlaceholder\":\"新绑定卡卡号\",\"max\":\"20\"},model:{value:(_vm.bankNo),callback:function ($$v) {_vm.bankNo=$$v},expression:\"bankNo\"}}),_vm._v(\" \"),_c('section',{staticClass:\"submit-box\"},[_c('err-msg',{attrs:{\"errMsg\":_vm.errMsg,\"classStyle\":\"err-msg\"}}),_vm._v(\" \"),_c('button',{staticClass:\"submit-btn\",on:{\"click\":_vm.goNext}},[_vm._v(\"下一步\")])],1),_vm._v(\" \"),_vm._m(0)],1)],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',{staticClass:\"foot-text\"},[_c('p',[_vm._v(\"温馨提示：\")]),_vm._v(\" \"),_c('p',[_vm._v(\"1.请您确认新绑定银行卡在银行绑定的手机号与旧卡 绑定手机号相同。\")]),_vm._v(\" \"),_c('p',[_vm._v(\"2.更换绑定银行卡前，请转出所有的投资资金并提现\")])])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-45b0b150\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ZhongBang/safe/ChangeBank.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-45b0b150\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./ChangeBank.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChangeBank.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./ChangeBank.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-45b0b150\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./ChangeBank.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-45b0b150\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ZhongBang/safe/ChangeBank.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}