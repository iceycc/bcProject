webpackJsonp([120],{FimO:function(t,e){},yefN:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("0jG4"),i=a("b1t1"),n=a("EOwk"),o=a("xJZn"),c=a("MmTA"),r=a("JIj5"),_=a("msXN"),l=a("Dd8w"),h=a.n(l),A={data:function(){return{BankType:"1",applyDate:"",CARD_NUM:"",BANK_USER_CODE:""}},created:function(){console.log("JinShang")},methods:{checkBankType:function(){var t=this,e={BIND_AC_NO:this.ACCT_NO};s.a.common.apiUserAccountProperties(e,function(e){t.BankType=e.ACC_FLAG})},handleApiRecharge:function(){var t=this,e={TYPE:"API_RECHARGE",PHONE_CODE:this.msgCode,BANK_PAY_PW:this.pass,APPLY_AMOUNT:r.a.fromatMoney(this.APPLY_AMOUNT),PREFIX:this.passCode,IS_UNIONPAY:this.BankType,ORIGWORKDATE:this.applyDate.WORKDATE,ORIGAGENTSERIALNO:this.applyDate.AGENTSERIALNO};s.a.reChange.apiRecharge(e,function(e){var a={BIZ_TYPE:"3",BESHARP_SEQ:e.BESHARP_RECHARGE_SEQ};console.log(a),t.queryStatus({text:"正在充值中",data:a,fn:function(a,s,i){"1"==a.RES_CODE?(clearInterval(s),c.a.$emit(n.a.showToast,a.RES_MSG),t.$router.push({name:n.e.RechargeFailure,query:{err:a.RES_MSG}})):"0"==a.RES_CODE?(clearInterval(s),c.a.$emit(n.a.showToast,a.RES_MSG),t.Londing.close(),t.$router.push({name:n.e.RechargeSuccess,query:h()({money:t.APPLY_AMOUNT},e)})):5==i&&(clearInterval(s),c.a.$emit(n.a.showToast,a.RES_MSG),t.$router.push({name:n.e.RechargeFailure,query:{err:a.RES_MSG}}))}})},function(e){t.$router.push({name:n.e.RechargeFailure,query:{err:e.RES_MSG}})})},getInfos:function(){var t=this;s.a.safe.apiBandCard({},function(e){t.logo=e.BANK_BG_URL,t.ORG_NAME=e.ORG_NAME,t.ACCT_NO=e.CARD_NUM,t.PHONE_NUM=e.PHONE_NUM,t.CARD_BANK_NAME=e.CARD_BANK_NAME,t.CARD_BANK_URL=e.CARD_BANK_URL,t.SINGLE_QUOTA=e.SINGLE_QUOTA,t.DAY_QUOTA=e.DAY_QUOTA,t.BANK_USER_CODE=e.BANK_USER_CODE,t.CARD_NUM=e.CARD_NUM;var a=e.CARD_NUM;t.checkBankType(),t.mainBankList.push({logo:e.CARD_BANK_URL,name:e.CARD_BANK_NAME,footNum:a.substr(a.length-4),money:"100",id:t.mainBankList.length+1})})},reChangeHandele:function(){},clickBank:function(){this.upseletShow=!this.upseletShow}}},u=void 0,p={data:function(){return{alertText:"",alertShow:!1,show:!1,html:"协议",page:!1,PIN:"",APPLY_AMOUNT:"",toUrl:"",ifGet:!1,write:!1,agree:!0,agree1:!0,agreeMentSrc:n.c+"/static/finsuit/js/openapi/js/xieyi/cz.html",ORG_NAME:"",imgSrc:n.g,logo:"",CARD_BANK_NAME:"",CARD_BANK_URL:"",DAY_QUOTA:"10000",SINGLE_QUOTA:"500",msgCode:"",codeText:"获取验证码",disable:!1,upseletShow:!1,mainBankList:[],passCode:"",ACCT_NO:"",PHONE_NUM:""}},computed:{ifCheckMoneyEmpty:function(){return!this.APPLY_AMOUNT},canClick:function(){return!!(this.APPLY_AMOUNT>=100&&this.msgCode&&this.agree)}},components:{UpSelect:o.a,PassWordZhengzhou:i.a},mixins:[_.a.HandleMixin,_.a.UtilMixin,A],created:function(){this.getInfos(),this.reChangeHandele()},methods:{clearNumHandle:function(){this.APPLY_AMOUNT=""},getMsg:function(){var t=this;if(!r.a.Check.trim(this.APPLY_AMOUNT,"充值金额",!0))if(this.APPLY_AMOUNT-0<100)c.a.$emit(n.a.showToast,"充值金额最小为100元");else{this.APPLY_AMOUNT-0>this.DAY_QUOTA-0&&c.a.$emit(n.a.showToast,"充值金额大于银行单笔限额规定，请调整充值金额");var e=60;this.disable=!0,this.getCode(),u=setInterval(function(){if(0==e)return t.codeText="重新发送",t.disable=!1,void clearInterval(u);e--,t.codeText=e+"s"},1e3)}},getCode:function(){var t=this,e={RECHARGE_AMOUNT:this.APPLY_AMOUNT};s.a.reChange.rechargeApply(e,function(e){if(t.applyDate=e,3==e.ERROR_CODE)return t.alertShow=!0,t.alertText=e.MSG,void c.a.$emit(n.a.showSendMsg,"");c.a.$emit(n.a.showSendMsg,"")},function(e){t.codeText="重新发送",t.disable=!1,clearInterval(u)})},showPage:function(){this.$router.push({name:n.e.DocsPage,query:{type:"recharge"}})},doAgreeHandle:function(){this.agree=!0,this.page=!1},cancel:function(){this.page=!1},checkMoney:function(){this.APPLY_AMOUNT-0>this.DAY_QUOTA-0&&c.a.$emit(n.a.showToast,"充值金额大于银行单笔限额规定，请调整充值金额")},doNext:function(){var t=this;console.log(this.write),r.a.Check.trim(this.APPLY_AMOUNT,"充值金额",!0)||(this.APPLY_AMOUNT-0>this.DAY_QUOTA-0?c.a.$emit(n.a.showToast,"充值金额大于银行单笔限额规定，请调整充值金额"):(this.Londing.open(),setTimeout(function(){t.Londing.close(),t.show=!0},1e3)))},doAgree:function(){this.agree=!this.agree},doReCange:function(){this.pass=$("#payPassAA").getKBD(),this.len=$("#payPassAA").getLenKBD(),this.passCode=$("#payPassAA").getBDCode(),r.a.Check.payPassLen(this.len,!0)||(this.show=!1,this.handleApiRecharge())}}},d={render:function(){var t=this,e=this,s=e.$createElement,i=e._self._c||s;return i("div",{staticClass:"app"},[i("app-bar",{attrs:{title:"充值"}}),e._v(" "),i("div",{staticClass:"rechargetitle"},[e._v("充值到"+e._s(e.ORG_NAME)+"直销银行")]),e._v(" "),i("div",{staticClass:"minshengbank"},[i("span",{staticClass:"minshengbankLogo"},[i("img",{staticStyle:{width:"75%"},attrs:{src:e.imgSrc+e.logo,alt:""}})]),e._v(" "),i("div",{staticClass:"bank"},[i("p",[e._v(e._s(e.ORG_NAME))]),e._v(" "),i("P",[e._v(e._s(e._f("formatBankNo")(e.CARD_NUM)))])],1)]),e._v(" "),i("div",{staticClass:"rechargetitle"},[e._v("银行卡")]),e._v(" "),i("div",{staticClass:"minshengbank",staticStyle:{"border-bottom":"1px solid #EEEEF0"},on:{click:e.clickBank}},[i("span",{staticClass:"minshengbankLogo",staticStyle:{"padding-top":"10px"}},[i("img",{staticStyle:{width:"75%"},attrs:{src:e.imgSrc+e.CARD_BANK_URL,alt:""}})]),e._v(" "),i("div",{staticClass:"bank"},[i("p",[e._v(e._s(e.CARD_BANK_NAME))]),e._v(" "),i("P",[e._v(e._s(e._f("formatBankNo")(e.BANK_USER_CODE)))])],1)]),e._v(" "),i("div",{staticClass:"money"},[i("p",[e._v("每日限额："+e._s(e._f("formatNum")(e.DAY_QUOTA))+"元")])]),e._v(" "),i("section",{staticClass:"inputAmount",staticStyle:{"border-top":".4rem solid #f6f6f6"}},[i("span",{staticClass:"Amount"},[e._v("金额")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.APPLY_AMOUNT,expression:"APPLY_AMOUNT"}],attrs:{type:"number",placeholder:"充值金额最小为100元"},domProps:{value:e.APPLY_AMOUNT},on:{change:e.checkMoney,input:function(t){t.target.composing||(e.APPLY_AMOUNT=t.target.value)}}}),e._v(" "),i("img",{directives:[{name:"show",rawName:"v-show",value:!e.ifCheckMoneyEmpty,expression:"!ifCheckMoneyEmpty"}],staticClass:"close-icon",attrs:{src:a("rfOz"),alt:""},on:{click:e.clearNumHandle}})]),e._v(" "),e.write?e._e():i("section",{staticClass:"inputAmount"},[i("span",{staticClass:"Amount"},[e._v("\n              验证码\n          ")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.msgCode,expression:"msgCode"}],attrs:{type:"text",placeholder:"输入验证码"},domProps:{value:e.msgCode},on:{input:function(t){t.target.composing||(e.msgCode=t.target.value)}}}),e._v(" "),i("button",{staticClass:"button",attrs:{disabled:e.disable},on:{click:e.getMsg}},[e._v(e._s(e.codeText)+"\n    ")])]),e._v(" "),i("button",{class:{tijiao:!0,active:e.canClick},attrs:{disabled:!e.canClick},on:{click:e.doNext}},[e._v("确认充值")]),e._v(" "),e.write?e._e():i("p",{class:{bang:!0,no:0==e.agree},on:{click:e.doAgree}},[e._v("我已阅读并同意"),i("span",{staticStyle:{color:"#0096FE"},on:{click:function(t){return t.stopPropagation(),e.showPage(t)}}},[e._v("《充值委托代扣协议》")])]),e._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:e.page,expression:"page"}],staticClass:"page"},[i("div",{staticClass:"docs"},[i("iframe",{staticClass:"indocs",attrs:{src:e.agreeMentSrc}})]),e._v(" "),i("div",{staticClass:"btn"},[i("mt-button",{attrs:{type:"primary"},on:{click:e.cancel}},[e._v("取消")]),e._v(" "),i("mt-button",{attrs:{type:"primary"},on:{click:e.doAgreeHandle}},[e._v("确认")])],1)]),e._v(" "),e.show?i("section",{staticClass:"bgbox"},[i("section",{staticClass:"passbox"},[e._m(0),e._v(" "),i("section",{staticClass:"field_row_wrap"},[i("p",{staticClass:"field_row_key"},[e._v("\n          交易密码\n        ")]),e._v(" "),i("div",{staticClass:"field_row_value"},[i("pass-word-zhengzhou",{attrs:{BankCardPass:"payPassAA"}})],1),e._v(" "),i("p",{staticClass:"info"},[e._v("密码由数字组成，必须为6位")])]),e._v(" "),i("div",{staticClass:"btn"},[i("mt-button",{attrs:{type:"primary"},on:{click:function(t){e.show=!e.show}}},[e._v("取消")]),e._v(" "),i("mt-button",{attrs:{type:"primary"},on:{click:e.doReCange}},[e._v("提交")])],1)])]):e._e(),e._v(" "),i("up-select",{attrs:{show:e.upseletShow,BankList:e.mainBankList}}),e._v(" "),e.alertShow?i("section",{staticClass:"w-alert-box"},[i("div",{staticClass:"w-box"},[i("p",[e._v(e._s(e.alertText))]),e._v(" "),i("div",{staticClass:"btn"},[i("button",{on:{click:function(){t.go(-1)}}},[e._v("取消")]),e._v(" "),i("button",{on:{click:function(){t.alertShow=!1}}},[e._v("确认")])])])]):e._e()],1)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("p",{staticClass:"title"},[e("img",{attrs:{src:a("j732"),alt:""}}),this._v("\n        由郑州银行提供技术保障")])}]};var v=a("VU/8")(p,d,!1,function(t){a("FimO")},"data-v-07419d38",null);e.default=v.exports}});
//# sourceMappingURL=120.c59452d6715de5c84296.js.map