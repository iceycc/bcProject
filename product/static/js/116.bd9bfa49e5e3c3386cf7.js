webpackJsonp([116],{"8u3O":function(t,e){},F0Nn:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=a("0jG4"),i=a("EOwk"),n=a("b1t1"),o=a("MmTA"),r=(a("JIj5"),void 0),l={data:function(){return{msgdisable:!1,msgCode:"",disable:!1,codeText:"获取验证码",show:!1,money:null,datas:{},imgSrc:i.g,toUrl:"",pass:"",len:0,banck:""}},mixins:[a("msXN").a.HandleMixin],components:{PassWordZhengzhou:n.a},created:function(){this.datas=this.$route.query},methods:{getCode:function(){var t={PHONE_NUM:this.PHONE_NUM,BIZ_TYPE:"1008",AMOUNT:this.APPLY_AMOUN};s.a.common.apiSendPhoneCode(t)},getMsg:function(){var t=this,e=60;this.disable=!0,r=setInterval(function(){if(0==e)return t.codeText="重新发送",t.disable=!1,void clearInterval(r);e--,t.codeText=e+"s"},1e3),this.getCode()},getAgreement:function(t){this.$router.push({name:i.e.DocsPage,query:{type:t,id:this.datas.id}})},buyHandle:function(){this.doPay()},polling:function(t){var e=this,a={BIZ_TYPE:"6",BESHARP_SEQ:t.BESHARP_ORDER_NO};this.Londing.open({text:"正在购买中"});var n=1,r=setInterval(function(){n++,s.a.common.apiQueryBizStatus(a,function(a){if("1"==a.RES_CODE||5==n)e.Londing.close(),clearInterval(r),o.a.$emit(i.a.showToast,a.RES_MSG),e.$router.push({name:i.e.BuyFailed,query:{err:a.RES_MSG}});else{if("0"==a.RES_CODE){clearInterval(r),o.a.$emit(i.a.showToast,a.RES_MSG),e.Londing.close();var s={money:e.datas.money,PRD_NAME:e.datas.PRD_NAME,ORG_NAME:e.datas.ORG_NAME,OPERA_DATE:t.OPERA_DATE,BESHARP_BUY_SEQ:t.BESHARP_SEQ,EXPECT_PROFIT_DATE:t.INC_DATE};return e.setComState({type:"buyData",value:s}),void e.$router.push({name:i.e.BuySuccess})}if(n>5)return clearInterval(r),o.a.$emit(i.a.showToast,a.RES_MSG),void e.$router.push({name:i.e.BuyFailed,query:{err:a.RES_MSG}})}},function(t){clearInterval(r),o.a.$emit(i.a.showToast,t)})},2e3)},doPay:function(){var t=this,e={PRD_ID:"17819",TYPE:"API_BUY",APPLY_AMOUNT:this.datas.money+"",PHONE_CODE:this.msgCode,ACCEPT_RISK:"1"};s.a.buy.apiBuy(e,function(e){t.polling(e)},function(e){t.Londing.close(),t.setComState({type:"reload",value:!0}),t.$router.push({name:i.e.BuyFailed,query:{err:e.RES_MSG}})})}}},c={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app"},[a("app-bar",{attrs:{title:"购买"}}),t._v(" "),a("div",{staticClass:"buytitle",staticStyle:{padding:"0 0.4rem"}},[a("div",[a("div",{staticClass:"buytitleleftimg"},[a("img",{staticStyle:{width:"100%"},attrs:{src:t.imgSrc+t.datas.logo,alt:""}})]),t._v(" "),a("div",{staticClass:"buytitleleftcontent"},[a("p",[t._v(t._s(t.datas.PRD_NAME))]),t._v(" "),a("p",{staticStyle:{color:"#666"}},[t._v("理财产品")])])])]),t._v(" "),a("div",{staticClass:"buytitlemoney"},[a("p",{staticClass:"buytitlemoneyjine"},[t._v("购买金额")]),t._v(" "),a("p",{staticClass:"buytitlemoneyshu"},[t._v(" ￥ "+t._s(t.datas.money))])]),t._v(" "),a("div",{staticClass:"jiaoyibank"},[a("div",{staticClass:"jiaoyibankname"},[t._v("交易银行")]),t._v(" "),a("div",{staticClass:"jiaoyibankzhixiaoname"},[t._v(t._s(t.datas.ORG_NAME))])]),t._v(" "),a("section",{staticClass:"inputAmount"},[a("span",{staticClass:"Amount"},[t._v("\n              验证码\n          ")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.msgCode,expression:"msgCode"}],attrs:{type:"text",placeholder:"请填写短信验证码"},domProps:{value:t.msgCode},on:{input:function(e){e.target.composing||(t.msgCode=e.target.value)}}}),t._v(" "),a("button",{staticClass:"button",attrs:{disabled:t.msgdisable},on:{click:t.getMsg}},[t._v(t._s(t.codeText)+"\n    ")])]),t._v(" "),a("mt-button",{staticClass:"tijiao",on:{click:t.buyHandle}},[t._v("确认购买")]),t._v(" "),a("p",{staticClass:"bang"},[t._v("我已阅读并同意注册\n    "),a("a",{staticStyle:{color:"#0096FE"},attrs:{href:"javascript:;"},on:{click:function(e){t.getAgreement("S")}}},[t._v("《投融资平台服务协议（投资人版）》")]),t._v(" "),a("a",{staticStyle:{color:"#0096FE"},attrs:{href:"javascript:;"},on:{click:function(e){t.getAgreement("B")}}},[t._v('《晋商银行直销银行"安鑫富"投融资协议》')])])],1)},staticRenderFns:[]};var u=a("VU/8")(l,c,!1,function(t){a("8u3O")},"data-v-0fb5d9f7",null);e.default=u.exports}});
//# sourceMappingURL=116.bd9bfa49e5e3c3386cf7.js.map