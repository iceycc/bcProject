webpackJsonp([27],{Wwxs:function(t,s){},qN0R:function(t,s,n){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=n("Dd8w"),i=n.n(a),e=n("mvHQ"),o=n.n(e),_=n("0jG4"),l=n("EOwk"),c=n("JIj5"),r=(n("NYxO"),n("MmTA")),v={name:"SafeLogin",data:function(){return{TITLE_TEPY:["已登录","未登录"],title:"我的资产",cur:"2",Bshow:!0,imgSrc:l.g,BankList:[],ISLoginBankList:[],ISLoginBankList2:[],NOLoginBankList:[],textBankList:[{ORG_ID:"49",ORG_NAME:"郑州银行",LOGO_URL:"",DESCRIPT:"隶属于郑州银行",BANK_NAME:"郑州银行"},{ORG_ID:"70",ORG_NAME:"晋商银行",LOGO_URL:"",DESCRIPT:"隶属于晋商银行",BANK_NAME:"晋商银行"},{ORG_ID:"227",ORG_NAME:"众邦银行",LOGO_URL:"",DESCRIPT:"隶属于郑州银行",BANK_NAME:"众邦银行"}]}},created:function(){this.reLoadToLogin()},methods:{tap:function(t){1==t&&this.$router.push({name:l.e.ProductList})},reLoadToLogin:function(){var t=this,s=c.a.storage.session.get("reload")||!1,n=c.a.storage.session.get("flag")||null;if(console.log("reload",s),s&&"{}"!=o()(s)){console.log("reload fn"),this.Bshow=!1,setTimeout(function(){t.Bshow=!0},1e3);var a=this.$route.query.NAME;c.a.storage.session.set("reload",!1),c.a.storage.session.remove("flag"),this.$router.push({name:n,query:{NAME:a}})}else this.getBankListByChannelId()},goPage:function(t,s){var n=s.ORG_ID;Object(l.b)(n)?(this.setBankState({type:"ORG_ID",value:s.ORG_ID}),this.setBankState({type:"ORG_NAME",value:s.ORG_NAME}),this.setBankState({type:"BANK_CARD_NAME",value:s.BANK_CARD_NAME}),"Login"==t&&(this.setComState({type:"loginType",value:l.e.BankAccount}),c.a.storage.session.set("ORG_ID",s.ORG_ID),c.a.storage.session.set("flag",l.e.Login),c.a.storage.session.set("reload",!0),window.location.reload()),"BankDetail"==t&&(c.a.storage.session.set("ORG_ID",s.ORG_ID),c.a.storage.session.set("flag",l.e.BankDetail),c.a.storage.session.set("reload",!0),window.location.reload())):r.a.$emit(l.a.showToast,"暂不支持该银行，请下载比财App")},getBankListByChannelId:function(){var t=this.$store.getters.GET_ACCOUNT_STATE.TOKEN;console.log("token",t),t?(this.TITLE_TEPY=["已登录","未登录"],this.getOpenBankList(),this.getNoOpenBankList()):(this.TITLE_TEPY=["已登录","未登录"],this.getNoOpenBankList())},getNoOpenBankList:function(){var t=this;_.a.bicai.getBankListByChannelId({OPEN_TYPE:"0"},"",function(s){var n=s.BANK_LIST;t.NOLoginBankList=n},function(t){console.log(t)})},getOpenBankList:function(){var t=this;_.a.bicai.getBankListByChannelId({OPEN_TYPE:"1"},"",function(s){var n=s.BANK_LIST;t.ISLoginBankList=n;for(var a=0;a<t.ISLoginBankList.length;a++)t.getOneBankInfo(t.ISLoginBankList[a].ORG_ID,a)},function(t){console.log(t)})},filterBankList:function(t){this.ISLoginBankList=t.filter(function(t,s){return 1==t.LOGIN_STATUS});for(var s=0;s<this.ISLoginBankList.length;s++)this.getOneBankInfo(this.ISLoginBankList[s].ORG_ID,s);this.NOLoginBankList=t.filter(function(t,s){return 0==t.LOGIN_STATUS})},getOneBankInfo:function(t,s){var n=this,a={ORG_ID:t,TYPE:"API_QRY_ASSET"};"49"==t&&_.a.commonApi.getBankBalance.ZZH(a,function(t){t;var a=n.ISLoginBankList[s];n.$set(n.ISLoginBankList,s,i()({},a,t))}),"227"==t&&_.a.commonApi.getBankBalance.ZBH(a,function(t){t;var a=n.ISLoginBankList[s];n.$set(n.ISLoginBankList,s,i()({},a,t))})}}},g={render:function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.Bshow,expression:"Bshow"}],staticStyle:{background:"#f6f6f9",height:"100%"}},[n("app-bar",{attrs:{title:t.title}}),t._v(" "),n("ul",{staticClass:"w-tap"},[n("li",{class:{actvie:1==t.cur},on:{click:function(s){t.tap(1)}}},[t._v("产品列表")]),t._v(" "),n("li",{class:{actvie:2==t.cur},on:{click:function(s){t.tap(2)}}},[t._v("我的资产")])]),t._v(" "),t.ISLoginBankList.length>0?n("section",{staticClass:"m-bank-box"},[n("p",{staticClass:"m-title"},[t._v(t._s(t.TITLE_TEPY[0]))]),t._v(" "),t._l(t.ISLoginBankList,function(s,a){return n("section",{key:a,staticClass:"m-bank-card",on:{click:function(n){n.stopPropagation(),t.goPage("BankDetail",s)}}},[n("div",{staticClass:"m-top"},[n("div",{staticClass:"m-logo"},[n("img",{attrs:{src:t.imgSrc+s.BANK_LOGO_URL,alt:""}})]),t._v(" "),n("div",{staticClass:"m-name"},[n("div",[t._v(t._s(s.ORG_NAME))]),t._v(" "),n("p",[t._v(t._s(s.DESCRIPT))])])]),t._v(" "),n("ul",{staticClass:"m-bottom"},[n("li",[n("P",[t._v("总资产")]),t._v(" "),n("P",[t._v(t._s(t._f("formatNum")(s.TOTAL_ASSET)))])],1),t._v(" "),n("li",[n("P",[t._v("昨日收益")]),t._v(" "),n("P",[t._v("\n            "+t._s(t._f("formatNum")(s.YSD_INCOME)))])],1),t._v(" "),n("li",[n("P",[t._v("累计收益")]),t._v(" "),n("P",[s.TOTAL_INCOME>=0?n("i",[t._v("+")]):t._e(),t._v(t._s(t._f("formatNum")(s.TOTAL_INCOME)))])],1)])])})],2):t._e(),t._v(" "),t.NOLoginBankList.length>0?n("section",{staticClass:"m-bank-box"},[n("p",{staticClass:"m-title"},[t._v(t._s(t.TITLE_TEPY[1]))]),t._v(" "),t._l(t.NOLoginBankList,function(s,a){return n("section",{key:a,staticClass:"m-bank-card"},[n("div",{staticClass:"m-top"},[n("div",{staticClass:"m-logo"},[n("img",{attrs:{src:t.imgSrc+s.BANK_LOGO_URL,alt:""}})]),t._v(" "),n("div",{staticClass:"m-name"},[n("div",[t._v(t._s(s.ORG_NAME))]),t._v(" "),n("p",[t._v(t._s(s.DESCRIPT))])]),t._v(" "),n("div",{staticClass:"m-btn",on:{click:function(n){t.goPage("Login",s)}}},[t._v("安全登录")])]),t._v(" "),n("ul",{staticClass:"m-bottom"},[n("li",[n("P",[t._v("总资产")]),t._v(" "),n("P",[t._v("- -")])],1),t._v(" "),n("li",[n("P",[t._v("昨日收益")]),t._v(" "),n("P",[t._v("- -")])],1),t._v(" "),n("li",[n("P",[t._v("累计收益")]),t._v(" "),n("P",[t._v("- -")])],1)])])})],2):t._e()],1)},staticRenderFns:[]};var L=n("VU/8")(v,g,!1,function(t){n("Wwxs")},"data-v-d30db57c",null);s.default=L.exports}});
//# sourceMappingURL=27.d383326deadb01b6b924.js.map