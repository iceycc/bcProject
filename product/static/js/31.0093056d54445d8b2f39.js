webpackJsonp([31],{"1Kkj":function(e,t){},OzF3:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s=a("0jG4"),i=a("EOwk"),n=a("xJZn"),o=a("MmTA"),r=a("JIj5"),c=a("msXN"),_=a("Dd8w"),l=a.n(_),u={data:function(){return{}},created:function(){console.log("JinShang")},methods:{getCode:function(){var e=this,t={PHONE_NUM:this.PHONE_NUM,BIZ_TYPE:"1004",AMOUNT:this.APPLY_AMOUNT};s.a.common.apiSendPhoneCode(t,function(t){o.a.$emit(i.a.showSendMsg,e.PHONE_NUM)})},handleApiRecharge:function(){var e=this,t={TYPE:"API_RECHARGE",PHONE_CODE:this.msgCode,APPLY_AMOUNT:this.APPLY_AMOUNT,VRFY_FLAG:"00"};s.a.reChange.apiRecharge(t,function(t){var a={BIZ_TYPE:"3",BESHARP_SEQ:t.BESHARP_RECHARGE_SEQ};e.queryStatus({text:"正在充值中",data:a,time:100,fn:function(a,s,n){e.setComState({type:"reload",value:!0}),"1"==a.RES_CODE?(clearInterval(s),o.a.$emit(i.a.showToast,a.RES_MSG),e.$router.push({name:i.e.RechargeFailure,query:{err:a.RES_MSG}})):"0"==a.RES_CODE?(clearInterval(s),o.a.$emit(i.a.showToast,a.RES_MSG),e.Londing.close(),e.$router.push({name:i.e.RechargeSuccess,query:l()({money:e.APPLY_AMOUNT},t)})):"20000"==a.RES_CODE?(clearInterval(s),e.Londing.close(),e.$router.push({name:i.e.RechargeWait})):100==n&&(clearInterval(s),o.a.$emit(i.a.showToast,a.RES_MSG),a.RES_CODE,e.$router.push({name:i.e.RechargeFailure,query:{err:a.RES_MSG}}))}})},function(t){e.setComState({type:"reload",value:!0}),e.$router.push({name:i.e.RechargeFailure,query:{err:t.RES_MSG}})})},getInfos:function(){var e=this;s.a.safe.apiBandCard({},function(t){e.logo=t.BANK_BG_URL,e.ORG_NAME=t.ORG_NAME,e.ACCT_NO=t.CARD_NUM,e.PHONE_NUM=t.PHONE_NUM,e.CARD_BANK_NAME=t.CARD_BANK_NAME,e.CARD_BANK_URL=t.CARD_BANK_URL,e.SINGLE_QUOTA=t.SINGLE_QUOTA,e.DAY_QUOTA=t.DAY_QUOTA;var a=t.CARD_NUM;e.mainBankList.push({logo:t.CARD_BANK_URL,name:t.CARD_BANK_NAME,footNum:a.substr(a.length-4),money:"100",id:e.mainBankList.length+1})})},reChangeHandele:function(){var e=this;s.a.reChange.apiRechargeProtoQuery({},function(t){console.log(t),"N"==t.SIGN_STATE?(e.write=!1,e.page=!1,e.agree1=!1):(e.write=!0,e.agree1=!0)})},clickBank:function(){}}},A=void 0,h={data:function(){return{html:"协议",page:!1,PIN:"",APPLY_AMOUNT:"",toUrl:"",ifGet:!1,write:!1,agree:!0,agree1:!0,agreeMentSrc:i.c+"/static/finsuit/js/openapi/js/xieyi/cz.html",ORG_NAME:"",imgSrc:i.g,logo:"",CARD_BANK_NAME:"",CARD_BANK_URL:"",DAY_QUOTA:"0.00",SINGLE_QUOTA:"0.00",msgCode:"",codeText:"获取验证码",disable:!1,upseletShow:!1,mainBankList:[],passCode:"",ACCT_NO:"",PHONE_NUM:""}},components:{UpSelect:n.a},mixins:[c.a.UtilMixin,u],created:function(){this.getInfos()},computed:{ifCheckMoneyEmpty:function(){return!this.APPLY_AMOUNT},canClick:function(){return!!(this.APPLY_AMOUNT&&this.msgCode&&this.agree)}},methods:{clearNumHandle:function(){this.APPLY_AMOUNT=""},getMsg:function(){var e=this;if(!r.a.Check.trim(this.APPLY_AMOUNT,"充值金额",!0))if(this.APPLY_AMOUNT-0>this.SINGLE_QUOTA-0)o.a.$emit(i.a.showToast,"充值金额大于银行每笔限额规定，请调整充值金额");else if(this.agree){var t=60;this.disable=!0,A=setInterval(function(){if(0==t)return e.codeText="重新发送",e.disable=!1,void clearInterval(A);t--,e.codeText=t+"s"},1e3),this.getCode()}else o.a.$emit(i.a.showToast,"请先同意充值协议")},showPage:function(){this.$router.push({name:i.e.DocsPage,query:{type:"recharge"}})},doAgreeHandle:function(){this.agree=!0,this.page=!1},cancel:function(){this.page=!1},checkMoney:function(){this.APPLY_AMOUNT-0>this.SINGLE_QUOTA-0&&o.a.$emit(i.a.showToast,"充值金额大于银行每笔限额规定，请调整充值金额")},doNext:function(){console.log(this.write),r.a.Check.trim(this.APPLY_AMOUNT,"充值金额",!0)||(this.APPLY_AMOUNT-0>this.SINGLE_QUOTA-0?o.a.$emit(i.a.showToast,"充值金额大于银行每笔限额规定，请调整充值金额"):this.doReCange())},doAgree:function(){this.agree=!this.agree},doReCange:function(){this.handleApiRecharge()}}},g={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{staticClass:"app"},[s("app-bar",{attrs:{title:"充值"}}),e._v(" "),s("div",{staticClass:"rechargetitle"},[e._v("充值到"+e._s(e.ORG_NAME))]),e._v(" "),s("div",{staticClass:"minshengbank"},[s("span",{staticClass:"minshengbankLogo"},[s("img",{staticStyle:{width:"75%"},attrs:{src:e.imgSrc+e.logo,alt:""}})]),e._v("\n    "+e._s(e.ORG_NAME)+"\n  ")]),e._v(" "),s("div",{staticClass:"rechargetitle"},[e._v("银行卡")]),e._v(" "),s("div",{staticClass:"minshengbank",staticStyle:{"border-bottom":"1px solid #EEEEF0"},on:{click:e.clickBank}},[s("span",{staticClass:"minshengbankLogo",staticStyle:{"padding-top":"10px"}},[s("img",{staticStyle:{width:"75%"},attrs:{src:e.imgSrc+e.CARD_BANK_URL,alt:""}})]),e._v("\n    "+e._s(e.CARD_BANK_NAME)+"\n  ")]),e._v(" "),s("div",{staticClass:"money"},[s("p",[e._v("每笔限额："+e._s(e._f("formatNum")(e.SINGLE_QUOTA))+"元")]),e._v(" "),s("p",[e._v("每日限额："+e._s(e._f("formatNum")(e.DAY_QUOTA))+"元")])]),e._v(" "),s("section",{staticClass:"inputAmount",staticStyle:{"border-top":".4rem solid #f6f6f6"}},[s("span",{staticClass:"Amount"},[e._v("金额")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.APPLY_AMOUNT,expression:"APPLY_AMOUNT"}],attrs:{type:"number",placeholder:"请输入金额"},domProps:{value:e.APPLY_AMOUNT},on:{change:e.checkMoney,input:function(t){t.target.composing||(e.APPLY_AMOUNT=t.target.value)}}}),e._v(" "),s("img",{directives:[{name:"show",rawName:"v-show",value:!e.ifCheckMoneyEmpty,expression:"!ifCheckMoneyEmpty"}],staticClass:"close-icon",attrs:{src:a("rfOz"),alt:""},on:{click:e.clearNumHandle}})]),e._v(" "),e.write?e._e():s("section",{staticClass:"inputAmount"},[s("span",{staticClass:"Amount"},[e._v("\n              验证码\n          ")]),e._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:e.msgCode,expression:"msgCode"}],attrs:{type:"text",placeholder:"输入验证码"},domProps:{value:e.msgCode},on:{input:function(t){t.target.composing||(e.msgCode=t.target.value)}}}),e._v(" "),s("button",{staticClass:"button",attrs:{disabled:e.disable},on:{click:e.getMsg}},[e._v(e._s(e.codeText)+"\n    ")])]),e._v(" "),s("button",{class:{tijiao:!0,active:e.canClick},attrs:{disabled:!e.canClick},on:{click:e.doNext}},[e._v("确认充值")]),e._v(" "),e.write?e._e():s("p",{class:{bang:!0,no:0==e.agree},on:{click:e.doAgree}},[e._v("我已阅读并同意"),s("span",{staticStyle:{color:"#0096FE"},on:{click:function(t){return t.stopPropagation(),e.showPage(t)}}},[e._v("《充值协议》")])]),e._v(" "),s("up-select",{attrs:{show:e.upseletShow,BankList:e.mainBankList}})],1)},staticRenderFns:[]};var d=a("VU/8")(h,g,!1,function(e){a("1Kkj")},"data-v-b471f5ba",null);t.default=d.exports}});
//# sourceMappingURL=31.0093056d54445d8b2f39.js.map