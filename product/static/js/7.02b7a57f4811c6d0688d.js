webpackJsonp([7],{"5N0p":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});a("ehhp");var s=a("NVmV"),n=a.n(s),i=a("0jG4"),o=a("EOwk"),r=a("MmTA"),l={data:function(){return{tabsParam:["1个月","2个月","3个月"," "],nowIndex:3,startDate:"",endDate:"",listdata:[],allLoaded:!1,scrollMode:"auto",currentPage:1}},components:{"v-loadmore":n.a},mixins:[],created:function(){this.endDate=this.getLastMonthYestdy(0),this.startDate=this.getLastMonthYestdy(1)},mounted:function(){this.getDataList()},methods:{initHandle:function(){this.allLoaded=!1,this.listdata=[],this.currentPage=1,this.getDataList()},loadTop:function(){console.log("下拉加载"),this.getDataList(),this.$refs.loadmore.onTopLoaded()},loadBottom:function(){console.log("上拉触发的分页查询"),this.more(),this.$refs.loadmore.onBottomLoaded()},more:function(){console.log(1),this.allLoaded||(this.currentPage++,this.getDataList(this.currentPage))},getDataList:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,a={currentPage:e+"",QRY_TYPE:"0",START_DATE:this.startDate,END_DATE:this.endDate};i.a.account.apiQryRechCashHis(a,function(a){0!=a.PAGE.retList.length?t.listdata=e>1?t.listdata.concat(a.PAGE.retList):a.PAGE.retList:t.allLoaded=!0})},toggleTabs:function(t){this.nowIndex=t,3!=t&&(this.endDate=this.getLastMonthYestdy(0),this.startDate=this.getLastMonthYestdy(t+1),this.initHandle())},setDate:function(){var t=this;this.$picker.show({type:"datePicker",endTime:this.getLastYearYestdy(0),startTime:this.getLastYearYestdy(2),onOk:function(e){t.endDate=t.fomateDate(e)}})},setDate2:function(){var t=this;this.$picker.show({type:"datePicker",date:this.startDate,endTime:this.getLastYearYestdy(0),startTime:this.getLastYearYestdy(2),onOk:function(e){t.startDate=t.fomateDate(e)}})},fomateDate:function(t){return t.split("-").map(function(t){return t.length>1?t:0+t}).join("-")},getLastMonthYestdy:function(t){var e=new Date,a=new Array([0],[31],[28],[31],[30],[31],[30],[31],[31],[30],[31],[30],[31]),s=e.getFullYear(),n=e.getDate(),i=e.getMonth()+1;return s%4==0&&s%100!=0&&(a[2]=29),i-t==0?(s-=1,i=12):i-=t,n=Math.min(n,a[i]),i<10&&(i="0"+i),n<10&&(n="0"+n),s+"-"+i+"-"+n},checkTime:function(t,e){var a=t,s=e;if(!s)return!0;var n=new Date(a).getTime(),i=new Date(s).getTime();if(""==a)return r.a.$emit(o.a.showToast,"开始日期不能为空"),!1;if(""==s)return r.a.$emit(o.a.showToast,"结束日期不能为空"),!1;if(n>i)return r.a.$emit(o.a.showToast,"开始日期不能大于结束日期"),!1;var l=a.split("-"),d=s.split("-");l[1]=parseInt(l[1]),l[2]=parseInt(l[2]),d[1]=parseInt(d[1]),d[2]=parseInt(d[2]);var c=!0;return l[0]==d[0]?d[1]-l[1]>3?c=!1:d[1]-l[1]==3&&d[2]>l[2]&&(c=!1):d[0]-l[0]>1?c=!1:d[0]-l[0]==1&&(l[1]<10?c=!1:l[1]+3-d[1]<12?c=!1:l[1]+3-d[1]==12&&d[2]>l[2]&&(c=!1)),!!c||(r.a.$emit(o.a.showToast,"查询日期范围太大，最大可查三个月的记录"),!1)},getLastYearYestdy:function(t){var e=new Date,a=e.getFullYear()-t,s=e.getDate(),n=e.getMonth()+1;return n<10&&(n="0"+n),s<10&&(s="0"+s),a+"-"+n+"-"+s},query:function(){this.checkTime(this.startDate,this.endDate)&&this.getDataList()}}},d={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"wrap"},[a("app-bar",{attrs:{title:"交易明细"}}),t._v(" "),a("div",{staticClass:"t-tab"},[a("ul",{staticClass:"tabs"},t._l(t.tabsParam,function(e,s){return a("li",{staticClass:"li-tab",class:{active:s==t.nowIndex},on:{click:function(e){t.toggleTabs(s)}}},[t._v(t._s(e)+"\n      ")])})),t._v(" "),a("div",{staticClass:"divTab"},[a("div",{directives:[{name:"show",rawName:"v-show",value:3==t.nowIndex,expression:"3==nowIndex"}],staticClass:"t-date"},[a("ul",[a("li",{on:{click:t.setDate2}},[t._v("\n            "+t._s(t.startDate)+"\n            "),a("span")]),t._v(" "),a("li",{on:{click:t.setDate}},[t._v("\n            "+t._s(t.endDate)+"\n            "),a("span")])]),t._v(" "),a("div",{staticClass:"t-query",on:{click:t.query}},[t._v("查询")])]),t._v(" "),a("p",{directives:[{name:"show",rawName:"v-show",value:3==t.nowIndex,expression:"3==nowIndex"}],staticClass:"t-text"},[t._v("根据银行要求，只能查询最近两年记录，每次查询最大范围三个月")]),t._v(" "),a("div",{staticClass:"t-content main-body",style:{"-webkit-overflow-scrolling":t.scrollMode}},[a("v-loadmore",{ref:"loadmore",attrs:{"top-method":t.loadTop,"bottom-method":t.loadBottom,"bottom-all-loaded":t.allLoaded,"auto-fill":!1}},[a("div",[a("ul",t._l(t.listdata,function(e,s){return a("li",{key:s},[a("h5",[a("span",[t._v(t._s(11==e.TYPE?"充值":"提现"))])]),t._v(" "),a("p",{staticClass:"p-bottom"},[a("span",[t._v(t._s(e.OPERA_TIME))]),t._v(" "),a("em",[t._v("¥"+t._s(e.TRANS_AMT))])])])}))])])],1)])])],1)},staticRenderFns:[]};var c=a("VU/8")(l,d,!1,function(t){a("pIY3"),a("Gy3R")},"data-v-5958552f",null);e.default=c.exports},Gy3R:function(t,e){},pIY3:function(t,e){}});
//# sourceMappingURL=7.02b7a57f4811c6d0688d.js.map