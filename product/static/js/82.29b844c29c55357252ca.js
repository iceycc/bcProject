webpackJsonp([82],{GfqU:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var i=s("0jG4"),a=s("EOwk"),o=s("MmTA"),n=s("b1t1"),c=s("msXN"),l=s("JIj5"),r={methods:{checkAuthStatus:function(){var e=this;i.a.bicai.getAuthStatus({},function(t){var s=t.AUTH_STATUS;t.isOldMember;switch(console.log(s),Number(s)){case 0:case 1:e.$router.push(a.e.BcOpening1);break;case 2:e.$router.push(a.e.BcOpening2);break;case 3:case 4:e.checkBankStatus();break;case 5:e.$router.push(a.e.BcOpening1)}})},checkBankStatus:function(){var e=this;i.a.common.apiRegisterBackShow({},function(t){var s=t.LAST_STEP_NUM;e.setComState({type:"TEL",value:e.tel}),l.a.storage.session.set("USERINFO",t),0==s&&(e.setComState({type:"openingData",value:t}),e.$router.push({name:a.e.Opening1})),1==s&&(e.setComState({type:"openingData",value:t}),e.$router.push({name:a.e.Opening2})),2==s&&(e.setComState({type:"Infos",value:t}),e.checkIfPinggu(t)),3==s&&(e.setComState({type:"Infos",value:t}),e.checkIfPinggu(t))},function(t){e.codeText="重新发送",e.msgDisabled=!1})},checkIfPinggu:function(e){this.removeComState("loginInfo");var t=e.HAS_GRADE;this.setComState({type:"HAS_GRADE",value:t}),1==t?(o.a.$emit(a.a.showToast,"请先进行评估"),this.$router.push({name:a.e.VerificationSuccess})):this.toPreProduct()}}},h=a.c+"/finsuitSafeCode?SESSION_ID=",u=void 0,m={data:function(){return{SESSION_ID:"",safeCodeUrl:h,msgDisabled:!1,tel:"",cms:"",pass:"",passLay:"",toUrl:"",loginPass:"loginPass",num:1,ifGet:!1,refur:!1,telShow:!1,cmsShow:!1,telPaceholder:"开户手机号",cmsholder:"短信验证码",codeText:"获取验证码",passPluginText:"",currentTel:"",ORG_ID:"",BANK_NAME:"",LOGO_URL:"",safeCode:"",showSafeCode:!1,getMsgCodeSuccess:!1}},mixins:[c.a.HandleMixin,c.a.UtilMixin,r],components:{PassWordZhengzhou:n.a},inject:["reload"],created:function(){this.ORG_ID=l.a.storage.session.get("ORG_ID")||"","227"==this.ORG_ID&&(this.BANK_NAME="众邦"),"49"==this.ORG_ID&&(this.BANK_NAME="郑州");var e=this.getComState.loginInfo;e&&(this.tel=e.PHONE_NUM,o.a.$emit(a.a.showToast,e.msg),this.removeComState("loginInfo"))},computed:{disabled:function(){return!(11==this.tel.length&&this.cms.length>0&&this.getMsgCodeSuccess)},canClick:function(){return!!(this.tel&&this.cms&&this.getMsgCodeSuccess)}},watch:{tel:function(e,t){""!=e&&(this.isValueNumber(e)?(e.length>11&&(this.tel=this.tel.toString().substr(0,11)),this.currentTel=e,e.length>1||(e?(this.telPaceholder="",this.telShow=!0):(this.telShow=!1,this.telPaceholder="开户手机号"))):this.tel=this.currentTel)},cms:function(e,t){""!=e&&(e.length>1||(e?(this.cmsholder="",this.cmsShow=!0):(this.cmsShow=!1,this.cmsholder="短信验证码")))}},methods:{goBicaiOpen:function(){this.$store.getters.GET_ACCOUNT_STATE.TOKEN&&this.checkAuthStatus()},loginFactory:function(){var e=this;if(!l.a.Check.tel(this.tel,!0)){var t={PHONE_NUM:this.tel+"",PHONE_CODE:this.cms,SAFT_CODE:this.safeCode},s=this.$store.getters.GET_COMMON_STATE.loginType;this.$store.commit("SET_TOKEN",null),i.a.bicai.login(t,function(t){i.a.watchApi({FUNCTION_ID:"ptb0A007",REMARK_DATA:"异业合作-登录",SOURCE_URL:s}),e.$store.commit("SET_BICAI_USER",t),e.$store.commit("SET_TOKEN",t.PHONE_TOKEN),e.checkAuthStatus()},function(t){i.a.watchApi({FUNCTION_ID:"ptb0A007",REMARK_DATA:"异业合作-登录"}),e.getMsgCodeSuccess=!1,e.codeText="重新发送",e.msgDisabled=!1,clearInterval(u),e.$store.commit("SET_SESSION_ID",""),e.$store.commit("SET_TOKEN","")})}},reImg:function(){},getSafeCode:function(){""!==this.safeCode?(this.getMsg(!0),this.showSafeCode=!1):o.a.$emit(a.a.showToast,"请输入图形验证码")},isValueNumber:function(e){return/(^-?[0-9]+\.{1}\d+$)|(^-?[1-9][0-9]*$)|(^-?0{1}$)/.test(e)},getMsg:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];this.getMsgCodeSuccess=!1;var s={PHONE_NUM:this.tel+"",SAFT_CODE:this.safeCode};this.safeCode="",i.a.bicai.sendSMS(s,function(s,i){var a=s.mark;e.SESSION_ID=i,0==a?(e.getMsgCodeSuccess=!0,e.timeDown()):(console.log(t),t?(e.getMsgCodeSuccess=!0,e.timeDown()):e.showSafeCode=!0)},function(t){e.SESSION_ID=""})},focusHandle:function(){this.telShow=!0,this.telPaceholder="",$(".input").css({fontSize:".5rem"})},clickMsgCodeHandle:function(){this.SESSION_ID="";var e=this.tel;e+="",console.log(e),l.a.Check.tel(e,!0)||this.getMsg()},timeDown:function(){var e=this,t=60;this.msgDisabled=!0,u=setInterval(function(){if(0==t)return e.codeText="重新发送",e.msgDisabled=!1,void clearInterval(u);t--,e.codeText=t+"s"},1e3)}}},d={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"hello"},[i("app-bar",{attrs:{title:"安全登录"}}),e._v(" "),i("div",{staticClass:"logo-box"},[i("img",{attrs:{src:s("rfBm"),alt:""},on:{click:e.goBicaiOpen}}),e._v(" "),i("span",[e._v("比财平台"+e._s(e.BANK_NAME)+"直销银行")])]),e._v(" "),i("div",{staticClass:"login_box"},[i("section",{staticClass:"input-box"},[i("transition",{attrs:{name:"fade"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:e.telShow,expression:"telShow"}],staticClass:"label"},[e._v("开户手机号")])]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"}],staticClass:"input",attrs:{type:"tel",name:"text1",placeholder:e.telPaceholder},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}})],1),e._v(" "),i("section",{staticClass:"input-box"},[i("transition",{attrs:{name:"fade"}},[i("p",{directives:[{name:"show",rawName:"v-show",value:e.cmsShow,expression:"cmsShow"}],staticClass:"label"},[e._v("短信验证码")])]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.cms,expression:"cms"}],staticClass:"input",attrs:{type:"input",name:"text1",placeholder:e.cmsholder},domProps:{value:e.cms},on:{input:function(t){t.target.composing||(e.cms=t.target.value)}}}),e._v(" "),i("button",{staticClass:"get-msg",attrs:{disabled:e.msgDisabled},on:{click:e.clickMsgCodeHandle}},[e._v(e._s(e.codeText))])],1),e._v(" "),i("button",{class:{tijiao:!0,active:e.canClick},attrs:{disabled:!e.canClick},on:{click:function(t){e.loginFactory(e.ORG_ID)}}},[e._v("登录")]),e._v(" "),i("p",{staticClass:"infos"},[e._v("\n      温馨提示：未注册比财账号的手机号，登录时将自动注册，且代表您已同意《用户服务协议》和《比财隐私政策》\n    ")])]),e._v(" "),i("section",{directives:[{name:"show",rawName:"v-show",value:e.showSafeCode,expression:"showSafeCode"}],staticClass:"safe-code"},[i("div",[i("p",[e._v("请填写图形验证码")]),e._v(" "),i("section",{staticClass:"middle"},[i("input",{directives:[{name:"model",rawName:"v-model",value:e.safeCode,expression:"safeCode"}],attrs:{type:"tel",placeholder:"请输入图形验证码"},domProps:{value:e.safeCode},on:{input:function(t){t.target.composing||(e.safeCode=t.target.value)}}}),e._v(" "),i("img",{attrs:{src:e.safeCodeUrl+e.SESSION_ID,alt:""},on:{click:e.reImg}})]),e._v(" "),i("section",{staticClass:"btn"},[i("button",{on:{click:function(t){e.showSafeCode=!1}}},[e._v("取消")]),e._v(" "),i("button",{on:{click:e.getSafeCode}},[e._v("确定")])])])]),e._v(" "),i("section",{staticClass:"bottomcontent"},[i("p",[i("img",{attrs:{src:s("j732"),alt:""}}),e._v("\n      "+e._s(e.BANK_NAME)+"银行已与比财实现安全直连")])])],1)},staticRenderFns:[]};var g=s("VU/8")(m,d,!1,function(e){s("wRY5")},"data-v-460240a7",null);t.default=g.exports},wRY5:function(e,t){}});
//# sourceMappingURL=82.29b844c29c55357252ca.js.map