{"version":3,"sources":["webpack:///src/views/ZhongBang/bankDetail/DealDetails.vue","webpack:///./src/views/ZhongBang/bankDetail/DealDetails.vue?536a","webpack:///./src/views/ZhongBang/bankDetail/DealDetails.vue"],"names":["DealDetails","mixins","data","searchCondition","pageNo","pageSize","pageList","allLoaded","scrollMode","pageList3","tabsParam","nowIndex","startDate","endDate","divSizeObj","small","large","created","components","v-loadmore","loadmore_default","a","mounted","this","loadPageList","setEleSize","methods","console","log","winheight","util","getWinSize","winHeight","topheight","getDivSize","height","toptabsheight","tDateheight","maiheight","document","querySelector","style","top","loadTop","$refs","loadmore","onTopLoaded","loadBottom","more","onBottomLoaded","index","getLastMonthYestdy","apiQryTradeHis","_this","parseInt","service","bank","apiQryEleTransDetail","currentPage","START_DATE","END_DATE","TYPE","pagenum","pageflag","res","concat","PAGE","retList","length","bus","$emit","Constant","showToast","start","end","_this2","apiQryHoldInfo","$nextTick","toggleTabs","setDate","_this3","$picker","show","type","endTime","getLastYearYestdy","startTime","onOk","fomateDate","setDate2","_this4","date","e","d","split","map","item","join","n","Date","daysInMonth","Array","strYear","getFullYear","strDay","getDate","strMonth","getMonth","Math","min","checkTime","star","begintime","endtime","time1","getTime","time2","arr1","arr2","flag","query","bankDetail_DealDetails","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","title","_v","_l","class","active","on","click","$event","_s","directives","name","rawName","value","expression","-webkit-overflow-scrolling","ref","top-method","bottom-method","bottom-all-loaded","auto-fill","key","staticStyle","display","flex","ABS_INFO","width","text-align","TYPE_NAME","_f","TRANS_DATE","TRANS_AMT","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"oOAqEAA,GACAC,QAAA,IACAC,KAFA,WAGA,OAEAC,iBAEAC,OAAA,IACAC,SAAA,MAEAC,YACAC,WAAA,EACAC,WAAA,OACAC,aACAC,WAAA,0BACAC,SAAA,EACAC,UAAA,GACAC,QAAA,GACAC,YACAC,SACAC,YAIAC,QAxBA,aA0BAC,YACAC,aAAAC,EAAAC,GAGAC,QA9BA,WAgCAC,KAAAC,eACAD,KAAAE,cAGAC,SACAD,WADA,WAEAE,QAAAC,IAAAL,KAAAZ,UACA,IAAAkB,EAAAC,EAAA,EAAAC,aAAAC,UACAC,EAAAH,EAAA,EAAAI,WAAA,aAAAC,OACAC,EAAAN,EAAA,EAAAI,WAAA,SAAAC,OACAE,EAAA,GAAAd,KAAAZ,SAAAyB,EAAA,EACAE,EAAAT,EAAAI,EAAAI,EACAV,QAAAC,IAAAK,EAAAK,EAAAD,GACAE,SAAAC,cAAA,UAAAC,MAAAC,IAAAT,EAAA,KACAM,SAAAC,cAAA,cAAAC,MAAAN,OAAAG,EAAA,MAEAK,QAAA,WAGApB,KAAAC,eACAD,KAAAqB,MAAAC,SAAAC,eAGAC,WAAA,WAEAxB,KAAAyB,OACAzB,KAAAqB,MAAAC,SAAAI,kBAGAzB,aAAA,WACAD,KAAApB,gBAAAC,OAAA,IACAmB,KAAAhB,WAAA,EACA,IAAA2C,EAAA3B,KAAAZ,SACAY,KAAAE,aACA,GAAAF,KAAAZ,WACAuC,EAAA,GAEA3B,KAAAV,QAAAU,KAAA4B,mBAAA,GACA5B,KAAAX,UAAAW,KAAA4B,mBAAAD,EAAA,GACA3B,KAAA6B,eAAA7B,KAAAX,UAAAW,KAAAV,UAGAmC,KAAA,eAAAK,EAAA9B,KAEAA,KAAApB,gBAAAC,OACA,IAAAkD,SAAA/B,KAAApB,gBAAAC,QAAA,GAeAmD,EAAA,EAAAC,KAAAC,sBAVAC,YAAA,IACAC,WAAA,aACAC,SAAA,aAGAC,KAAA,2BACAC,QAAA,KACAC,SAAA,KAGA,SAAAC,GACAX,EAAA/C,SAAA+C,EAAA/C,SAAA2D,OAAAD,EAAAE,KAAAC,SACAH,EAAAE,KAAAC,QAAAC,OAAAf,EAAAlD,gBAAAE,WACAgD,EAAA9C,WAAA,EACA8D,EAAA,EAAAC,MAAAC,EAAA,EAAAC,UAAA,gBAMApB,eAlEA,SAkEAqB,EAAAC,GAAA,IAAAC,EAAApD,KAoBAgC,EAAA,EAAAC,KAAAoB,gBATAlB,YAAA,IACAG,KAAA,2BACAF,WAAA,aACAC,SAAA,aAGAE,QAAA,KACAC,SAAA,KAEA,SAAAC,GACAW,EAAArE,SAAA0D,EAAAE,KAAAC,QACAQ,EAAArE,SAAA8D,OAAAO,EAAAxE,gBAAAE,WACAsE,EAAApE,WAAA,GAEAoE,EAAArE,SAAA8D,QAAA,GACAC,EAAA,EAAAC,MAAAC,EAAA,EAAAC,UAAA,QAEAG,EAAAE,UAAA,WAIAtD,KAAAf,WAAA,aAKAsE,WAvGA,SAuGA5B,GACA3B,KAAAZ,SAAAuC,EACA3B,KAAAjB,YACAiB,KAAAC,gBAEAuD,QA5GA,WA4GA,IAAAC,EAAAzD,KACAA,KAAA0D,QAAAC,MACAC,KAAA,aACAC,QAAA7D,KAAA8D,kBAAA,GACAC,UAAA/D,KAAA8D,kBAAA,GACAE,KAAA,SAAArF,GACA8E,EAAAnE,QAAAmE,EAAAQ,WAAAtF,OAIAuF,SAtHA,WAsHA,IAAAC,EAAAnE,KACAA,KAAA0D,QAAAC,MACAC,KAAA,aACAQ,KAAApE,KAAAX,UACAwE,QAAA7D,KAAA8D,kBAAA,GACAC,UAAA/D,KAAA8D,kBAAA,GACAE,KAAA,SAAAK,GACAF,EAAA9E,UAAA8E,EAAAF,WAAAI,OAIAJ,WAjIA,SAiIAK,GAOA,OANAA,EACAC,MAAA,KAEAC,IAAA,SAAAC,GACA,OAAAA,EAAA5B,OAAA,EAAA4B,EAAA,EAAAA,IAEAC,KAAA,MAGA9C,mBA3IA,SA2IA+C,GACA,IAAAP,EAAA,IAAAQ,KACAC,EAAA,IAAAC,OACA,IACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KACA,KAEAC,EAAAX,EAAAY,cACAC,EAAAb,EAAAc,UACAC,EAAAf,EAAAgB,WAAA,EAuBA,OAtBAL,EAAA,MAAAA,EAAA,SAEAF,EAAA,OAEAM,EAAAR,GAAA,GAEAI,GAAA,EACAI,EAAA,IAEAA,GAAAR,EAGAM,EAAAI,KAAAC,IAAAL,EAAAJ,EAAAM,IAEAA,EAAA,KAEAA,EAAA,IAAAA,GAEAF,EAAA,KACAA,EAAA,IAAAA,GAEAF,EAAA,IAAAI,EAAA,IAAAF,GAGAM,UAvLA,SAuLAC,EAAArC,GACA,IAAAsC,EAAAD,EACAE,EAAAvC,EACA,IAAAuC,EACA,SAGA,IAAAC,EAAA,IAAAf,KAAAa,GAAAG,UACAC,EAAA,IAAAjB,KAAAc,GAAAE,UACA,OAAAH,EAEA,OADA3C,EAAA,EAAAC,MAAAC,EAAA,EAAAC,UAAA,aACA,EAEA,OAAAyC,EAEA,OADA5C,EAAA,EAAAC,MAAAC,EAAA,EAAAC,UAAA,aACA,EAEA,GAAA0C,EAAAE,EAEA,OADA/C,EAAA,EAAAC,MAAAC,EAAA,EAAAC,UAAA,iBACA,EAIA,IAAA6C,EAAAL,EAAAlB,MAAA,KACAwB,EAAAL,EAAAnB,MAAA,KACAuB,EAAA,GAAA/D,SAAA+D,EAAA,IACAA,EAAA,GAAA/D,SAAA+D,EAAA,IACAC,EAAA,GAAAhE,SAAAgE,EAAA,IACAA,EAAA,GAAAhE,SAAAgE,EAAA,IACA,IAAAC,GAAA,EAiCA,OAhCAF,EAAA,IAAAC,EAAA,GAEAA,EAAA,GAAAD,EAAA,KAEAE,GAAA,EACAD,EAAA,GAAAD,EAAA,OAEAC,EAAA,GAAAD,EAAA,KAEAE,GAAA,GAKAD,EAAA,GAAAD,EAAA,KACAE,GAAA,EACAD,EAAA,GAAAD,EAAA,QACAA,EAAA,MAEAE,GAAA,EACAF,EAAA,KAAAC,EAAA,MAEAC,GAAA,EACAF,EAAA,KAAAC,EAAA,QAEAA,EAAA,GAAAD,EAAA,KAEAE,GAAA,MAKAA,IAEAlD,EAAA,EAAAC,MAAAC,EAAA,EAAAC,UAAA,wBACA,IAKAa,kBA7PA,SA6PAa,GACA,IAAAP,EAAA,IAAAQ,KACAG,EAAAX,EAAAY,cAAAL,EACAM,EAAAb,EAAAc,UACAC,EAAAf,EAAAgB,WAAA,EASA,OAPAD,EAAA,KACAA,EAAA,IAAAA,GAEAF,EAAA,KACAA,EAAA,IAAAA,GAEAF,EAAA,IAAAI,EAAA,IAAAF,GAGAgB,MA5QA,WA6QAjG,KAAAuF,UAAAvF,KAAAX,UAAAW,KAAAV,SACAU,KAAA6B,eAAA7B,KAAAX,UAAAW,KAAAV,YCpXA4G,GADiBC,OAFjB,WAA0B,IAAAC,EAAApG,KAAaqG,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,SAAmBF,EAAA,OAAYE,YAAA,aAAuBF,EAAA,WAAgBG,OAAOC,MAAA,UAAgBP,EAAAQ,GAAA,KAAAL,EAAA,MAAuBE,YAAA,QAAmBL,EAAAS,GAAAT,EAAA,mBAAA3B,EAAA9C,GAA6C,OAAA4E,EAAA,MAAgBE,YAAA,SAAAK,OAA4BC,OAAApF,GAAAyE,EAAAhH,UAA2B4H,IAAKC,MAAA,SAAAC,GAAyBd,EAAA7C,WAAA5B,OAAwByE,EAAAQ,GAAAR,EAAAe,GAAA1C,GAAA,kBAAoC,GAAA2B,EAAAQ,GAAA,KAAAL,EAAA,OAA6BE,YAAA,UAAoBF,EAAA,OAAYE,YAAA,WAAqBF,EAAA,OAAYa,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA,IAAAnB,EAAAhH,SAAAoI,WAAA,iBAAgFf,YAAA,WAAuBF,EAAA,MAAAA,EAAA,MAAoBS,IAAIC,MAAAb,EAAAlC,YAAsBkC,EAAAQ,GAAA,iBAAAR,EAAAe,GAAAf,EAAA/G,WAAA,kBAAAkH,EAAA,UAAAH,EAAAQ,GAAA,KAAAL,EAAA,MAAoGS,IAAIC,MAAAb,EAAA5C,WAAqB4C,EAAAQ,GAAA,iBAAAR,EAAAe,GAAAf,EAAA9G,SAAA,kBAAAiH,EAAA,YAAAH,EAAAQ,GAAA,KAAAL,EAAA,OAAqGE,YAAA,UAAAO,IAA0BC,MAAAb,EAAAH,SAAmBG,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,KAAuCa,aAAaC,KAAA,OAAAC,QAAA,SAAAC,MAAA,IAAAnB,EAAAhH,SAAAoI,WAAA,iBAAgFf,YAAA,WAAuBL,EAAAQ,GAAA,mCAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAkEE,YAAA,sBAAAvF,OAA0CuG,6BAAArB,EAAAnH,cAA+CsH,EAAA,cAAmBmB,IAAA,WAAAhB,OAAsBiB,aAAAvB,EAAAhF,QAAAwG,gBAAAxB,EAAA5E,WAAAqG,oBAAAzB,EAAApH,UAAA8I,aAAA,KAA6GvB,EAAA,OAAAA,EAAA,KAAAH,EAAAS,GAAAT,EAAA,kBAAA3B,EAAA9C,GAA+D,OAAA4E,EAAA,MAAgBwB,IAAApG,IAAU4E,EAAA,MAAWyB,aAAaC,QAAA,UAAkB1B,EAAA,QAAayB,aAAaE,KAAA,OAAY9B,EAAAQ,GAAAR,EAAAe,GAAA1C,EAAA0D,aAAA/B,EAAAQ,GAAA,KAAAL,EAAA,QAAyDyB,aAAaI,MAAA,MAAAC,aAAA,WAAoCjC,EAAAQ,GAAAR,EAAAe,GAAA1C,EAAA6D,gBAAAlC,EAAAQ,GAAA,KAAAL,EAAA,KAAAA,EAAA,QAAAH,EAAAQ,GAAAR,EAAAe,GAAAf,EAAAmC,GAAA,cAAAnC,CAAA3B,EAAA+D,gBAAApC,EAAAQ,GAAA,KAAAL,EAAA,MAAAH,EAAAQ,GAAAR,EAAAe,GAAAf,EAAAmC,GAAA,YAAAnC,CAAA3B,EAAAgE,2BAA4M,UAEx2DC,oBCEjB,IAcAC,EAdAC,EAAA,OAcAC,CACApK,EACAyH,GATA,EAXA,SAAA4C,GACAF,EAAA,QACAA,EAAA,SAaA,kBAEA,MAUAG,EAAA,QAAAJ,EAAA","file":"static/js/3.c62407b930ed25d731e8.js","sourcesContent":["<template>\n  <div class=\"wrap\">\n    <div class=\"wrap-top\">\n      <app-bar title=\"交易明细\"></app-bar>\n      <ul class=\"tabs\">\n        <li class=\"li-tab\" v-for=\"(item,index) in tabsParam\" @click=\"toggleTabs(index)\"\n            :class=\"{active:index==nowIndex}\">{{item}}\n        </li>\n      </ul>\n    </div>\n    <div class=\"t-tab\">\n      <div class=\"divTab\">\n        <div class=\"t-date\" v-show=\"nowIndex===3\">\n          <ul>\n            <li @click=\"setDate2\">\n              {{startDate}}\n              <span></span>\n            </li>\n            <li @click=\"setDate\">\n              {{endDate}}\n              <span></span>\n            </li>\n          </ul>\n          <div class=\"t-query\" @click=\"query\">查询</div>\n        </div>\n        <p class=\"t-text\" v-show=\"nowIndex===3\">根据银行要求，只能查询最近两年记录，每次查询最大范围三个月</p>\n        <div class=\"t-content main-body\" :style=\"{'-webkit-overflow-scrolling': scrollMode}\">\n          <v-loadmore :top-method=\"loadTop\" :bottom-method=\"loadBottom\" :bottom-all-loaded=\"allLoaded\"\n                      :auto-fill=\"false\" ref=\"loadmore\">\n            <div>\n              <ul>\n                <!--TYPE  交易类型  字符-->\n                <!--D借、C贷、P付、R收-->\n                <!--TYPE_NAME  交易类型名称  D/P：支出；C/R：收入-->\n                <!--TRANS_AMT  交易金额  Decimal(15,2)-->\n                <!--字符-->\n                <!--TRANS_DATE  发生日期  字符 yyyy-MM-dd-->\n                <!--ABS_INFO  摘要信息  字符-->\n                <!--BANK_ID  交易流水号  字符-->\n                <!--BANLANCE  余额  Decimal(15,2)-->\n                <!--字符-->\n                <li v-for=\"(item,index) in pageList\" :key=\"index\">\n                  <h5 style=\"display: flex\">\n                    <span style=\"flex: 1\">{{item.ABS_INFO}}</span>\n                    <span style=\"width: 40%;text-align: right\">{{item.TYPE_NAME}}</span>\n                  </h5>\n                  <p>\n                    <span>{{item.TRANS_DATE | timerFormat}}</span>\n                    <em>{{item.TRANS_AMT | formatNum}}</em>\n                  </p>\n                </li>\n\n              </ul>\n            </div>\n          </v-loadmore>\n        </div>\n      </div>\n    </div>\n\n  </div>\n</template>\n<script>\n  import API from \"@/service\";\n  import {BusName} from \"@/Constant\";\n  import Bus from \"@/plugin/bus\";\n  import {Loadmore} from \"mint-ui\"\n  import util from \"libs/util\";\n\n\n  export default {\n    mixins: [''],\n    data() {\n      return {\n        // 1月分页\n        searchCondition: {\n          //分页属性\n          pageNo: \"1\",\n          pageSize: \"10\"\n        },\n        pageList: [],\n        allLoaded: false, //是否可以上拉属性，false可以上拉，true为禁止上拉，就是不让往上划加载数据了\n        scrollMode: \"auto\", //移动端弹性滚动效果，touch为弹性滚动，auto是非弹性滚动\n        pageList3: [],\n        tabsParam: [\"近一个月\", \"近二个月\", \"近三个月\", \" \"], //（这个也可以用对象key，value来实现）\n        nowIndex: 0, //默认第一个tab为激活状态\n        startDate: \"\",\n        endDate: \"\",\n        divSizeObj: {\n          small: {},\n          large: {}\n        }\n      };\n    },\n    created() {\n    },\n    components: {\n      \"v-loadmore\": Loadmore // 为组件起别名，vue转换template标签时不会区分大小写，例如：loadMore这种标签转换完就会变成loadmore，容易出现一些匹配问题\n      // 推荐应用组件时用a-b形式起名\n    },\n    mounted() {\n      //交易数据\n      this.loadPageList(); //初次访问查询列表\n      this.setEleSize()\n\n    },\n    methods: {\n      setEleSize() {\n        console.log(this.nowIndex);\n        let winheight = util.getWinSize().winHeight\n        let topheight = util.getDivSize('.wrap-top').height\n        let toptabsheight = util.getDivSize('.tabs').height\n        let tDateheight = this.nowIndex == 3 ? toptabsheight : 0\n        let maiheight = winheight - topheight - tDateheight\n        console.log(topheight, maiheight, tDateheight)\n        document.querySelector('.t-tab').style.top = topheight + 'px'\n        document.querySelector('.main-body').style.height = maiheight + 'px'\n      },\n      loadTop: function () {\n        //组件提供的下拉触发方法\n        //下拉加载\n        this.loadPageList();\n        this.$refs.loadmore.onTopLoaded(); // 固定方法，查询完要调用一次，用于重新定位\n\n      },\n      loadBottom: function () {\n        // 上拉加载\n        this.more(); // 上拉触发的分页查询\n        this.$refs.loadmore.onBottomLoaded(); // 固定方法，查询完要调用一次，用于重新定位\n\n      },\n      loadPageList: function () {\n        this.searchCondition.pageNo = \"1\";\n        this.allLoaded = false;\n        let index = this.nowIndex\n        this.setEleSize()\n        if (this.nowIndex == 3) {\n          index = 0\n        }\n        this.endDate = this.getLastMonthYestdy(0);\n        this.startDate = this.getLastMonthYestdy(index + 1);\n        this.apiQryTradeHis(this.startDate, this.endDate); //交易数据\n\n      },\n      more: function () {\n        // 分页查询\n        this.searchCondition.pageNo =\n          \"\" + (parseInt(this.searchCondition.pageNo) + 1);\n        let data = {\n\n          // PRD_INDEX_ID:'',\n          // currentPage: this.searchCondition.pageNo,\n          currentPage: \"0\",\n          START_DATE: '2020-08-26',\n          END_DATE: '2020-08-27',\n          // START_DATE: this.startDate,\n          // END_DATE: this.endDate,\n          TYPE: 'API_QRY_ELE_TRANS_DETAIL',\n          pagenum: '10',\n          pageflag: '4'\n\n        };\n        API.bank.apiQryEleTransDetail(data, res => {\n          this.pageList = this.pageList.concat(res.PAGE.retList);\n          if (res.PAGE.retList.length < this.searchCondition.pageSize) {\n            this.allLoaded = true;\n            Bus.$emit(BusName.showToast, \"数据全部加载完成\");\n          }\n        });\n\n      },\n\n      apiQryTradeHis(start, end) {\n        // TYPE\t请求类型\n        // currentPage\t当前页\n        // QRY_TYPE\t查询类型\n        // PRD_TYPE\t产品类型\n        // PRD_INDEX_ID\t产品ID\n        // FUND_NO\t基金代码\n        // ORG_ID\t机构ID\n        // START_DATE\t开始日期\n        // END_DATE\t结束日期\n        let data = {\n          currentPage: \"0\",\n          TYPE: 'API_QRY_ELE_TRANS_DETAIL',\n          START_DATE: '2020-08-26',\n          END_DATE: '2020-08-27',\n          // START_DATE: start,\n          // END_DATE: end,\n          pagenum: '10',\n          pageflag: '4'\n        };\n        API.bank.apiQryHoldInfo(data, res => {\n          this.pageList = res.PAGE.retList;\n          if (this.pageList.length < this.searchCondition.pageSize) {\n            this.allLoaded = true;\n          }\n          if (this.pageList.length <= 0) {\n            Bus.$emit(BusName.showToast, \"暂无数据\");\n          }\n          this.$nextTick(function () {\n            // 原意是DOM更新循环结束时调用延迟回调函数，大意就是DOM元素在因为某些原因要进行修改就在这里写，要在修改某些数据后才能写，\n            // 这里之所以加是因为有个坑，iphone在使用-webkit-overflow-scrolling属性，就是移动端弹性滚动效果时会屏蔽loadmore的上拉加载效果，\n            // 花了好久才解决这个问题，就是用这个函数，意思就是先设置属性为auto，正常滑动，加载完数据后改成弹性滑动，安卓没有这个问题，移动端弹性滑动体验会更好\n            this.scrollMode = \"touch\";\n          });\n\n        });\n      },\n      toggleTabs(index) {\n        this.nowIndex = index;\n        this.pageList = []\n        this.loadPageList();\n      },\n      setDate() {\n        this.$picker.show({\n          type: \"datePicker\",\n          endTime: this.getLastYearYestdy(0), //截至时间\n          startTime: this.getLastYearYestdy(2), //开始时间\n          onOk: data => {\n            this.endDate = this.fomateDate(data);\n          }\n        });\n      },\n      setDate2() {\n        this.$picker.show({\n          type: \"datePicker\",\n          date: this.startDate, //初始化时间\n          endTime: this.getLastYearYestdy(0), //截至时间\n          startTime: this.getLastYearYestdy(2), //开始时间\n          onOk: e => {\n            this.startDate = this.fomateDate(e);\n          }\n        });\n      },\n      fomateDate(d) {\n        let strDate = d;\n        let strDate1 = strDate.split(\"-\");\n\n        let strDate2 = strDate1.map(function (item) {\n          return item.length > 1 ? item : 0 + item;\n        });\n        return strDate2.join(\"-\");\n      },\n      // 获取前几个月份\n      getLastMonthYestdy(n) {\n        var date = new Date(); //        1    2    3    4    5    6    7    8    9   10    11   12月\n        var daysInMonth = new Array(\n          [0],\n          [31],\n          [28],\n          [31],\n          [30],\n          [31],\n          [30],\n          [31],\n          [31],\n          [30],\n          [31],\n          [30],\n          [31]\n        );\n        var strYear = date.getFullYear();\n        var strDay = date.getDate();\n        var strMonth = date.getMonth() + 1;\n        if (strYear % 4 == 0 && strYear % 100 != 0) {\n          //一、解决闰年平年的二月份天数   //平年28天、闰年29天//能被4整除且不能被100整除的为闰年\n          daysInMonth[2] = 29;\n        }\n        if (strMonth - n == 0) {\n          //二、解决跨年问题\n          strYear -= 1;\n          strMonth = 12;\n        } else {\n          strMonth -= n;\n        }\n        //        strDay = daysInMonth[strMonth] >= strDay ? strDay : daysInMonth[strMonth];\n        strDay = Math.min(strDay, daysInMonth[strMonth]); //三、前一个月日期不一定和今天同一号，例如3.31的前一个月日期是2.28；9.30前一个月日期是8.30\n\n        if (strMonth < 10) {\n          //给个位数的月、日补零\n          strMonth = \"0\" + strMonth;\n        }\n        if (strDay < 10) {\n          strDay = \"0\" + strDay;\n        }\n        let datastr = strYear + \"-\" + strMonth + \"-\" + strDay;\n        return datastr;\n      },\n      checkTime(star, end) {\n        var begintime = star;\n        var endtime = end;\n        if (!endtime) {\n          return true;\n        }\n\n        var time1 = new Date(begintime).getTime();\n        var time2 = new Date(endtime).getTime();\n        if (begintime == \"\") {\n          Bus.$emit(BusName.showToast, \"开始日期不能为空\");\n          return false;\n        }\n        if (endtime == \"\") {\n          Bus.$emit(BusName.showToast, \"结束日期不能为空\");\n          return false;\n        }\n        if (time1 > time2) {\n          Bus.$emit(BusName.showToast, \"开始日期不能大于结束日期\");\n          return false;\n        }\n\n        //判断时间跨度是否大于3个月\n        var arr1 = begintime.split(\"-\");\n        var arr2 = endtime.split(\"-\");\n        arr1[1] = parseInt(arr1[1]);\n        arr1[2] = parseInt(arr1[2]);\n        arr2[1] = parseInt(arr2[1]);\n        arr2[2] = parseInt(arr2[2]);\n        var flag = true;\n        if (arr1[0] == arr2[0]) {\n          //同年\n          if (arr2[1] - arr1[1] > 3) {\n            //月间隔超过3个月\n            flag = false;\n          } else if (arr2[1] - arr1[1] == 3) {\n            //月相隔3个月，比较日\n            if (arr2[2] > arr1[2]) {\n              //结束日期的日大于开始日期的日\n              flag = false;\n            }\n          }\n        } else {\n          //不同年\n          if (arr2[0] - arr1[0] > 1) {\n            flag = false;\n          } else if (arr2[0] - arr1[0] == 1) {\n            if (arr1[1] < 10) {\n              //开始年的月份小于10时，不需要跨年\n              flag = false;\n            } else if (arr1[1] + 3 - arr2[1] < 12) {\n              //月相隔大于3个月\n              flag = false;\n            } else if (arr1[1] + 3 - arr2[1] == 12) {\n              //月相隔3个月，比较日\n              if (arr2[2] > arr1[2]) {\n                //结束日期的日大于开始日期的日\n                flag = false;\n              }\n            }\n          }\n        }\n        if (!flag) {\n          // alert(\"时间跨度不得超过3个月！\");\n          Bus.$emit(BusName.showToast, \"查询日期范围太大，最大可查三个月的记录\");\n          return false;\n        }\n        return true;\n      },\n      // 获取前n年的日期\n      getLastYearYestdy(n) {\n        var date = new Date();\n        var strYear = date.getFullYear() - n;\n        var strDay = date.getDate();\n        var strMonth = date.getMonth() + 1;\n\n        if (strMonth < 10) {\n          strMonth = \"0\" + strMonth;\n        }\n        if (strDay < 10) {\n          strDay = \"0\" + strDay;\n        }\n        let datastr = strYear + \"-\" + strMonth + \"-\" + strDay;\n        return datastr;\n      },\n      query() {\n        this.checkTime(this.startDate, this.endDate);\n        this.apiQryTradeHis(this.startDate, this.endDate); //交易数据\n      }\n    }\n  };\n</script>\n\n<style lang=\"scss\">\n  // .pro .header img{ display:none;}\n  // .pro .header{ border-bottom:1px solid #518BEE;}\n  .m-picker .m-picker-header span:last-of-type {\n    color: #508cee;\n  }\n</style>\n\n<style lang=\"scss\" scoped>\n  @import \"~@/assets/px2rem\";\n\n  .icon {\n    position: absolute;\n  }\n\n  .icon:after {\n    display: block;\n    content: \"\";\n    width: px2rem(22);\n    height: px2rem(22);\n    display: block;\n    margin-top: px2rem(10);\n    z-index: 2;\n    background: url(\"~@/assets/images/icon_shaixuan@2x.png\") no-repeat;\n    background-size: 100%;\n  }\n\n  .wrap {\n    position: relative;\n    width: 100%;\n    height: 100%;\n    box-sizing: border-box;\n    background: #f4f4f8;\n    overflow: hidden;\n  }\n\n  .wrap-top {\n    position: absolute;\n    width: 100%;\n    top: 0;\n    .tabs {\n      position: relative;\n      display: flex;\n      height: px2rem(44);\n      line-height: px2rem(44);\n      background: #fff;\n      li {\n        flex: 1;\n        text-align: center;\n        font-size: px2rem(15);\n        color: #b3b3b3;\n      }\n      li:last-child {\n        position: relative;\n        width: px2rem(60);\n        height: px2rem(44);\n        flex: none;\n        border-left: px2rem(1) solid #f6f6f9;\n      }\n      li:last-child:after {\n        position: absolute;\n        content: \"\";\n        width: px2rem(22);\n        height: px2rem(22);\n        display: block;\n        z-index: 2;\n        background: url(\"~@/assets/images/icon_shaixuan@2x.png\") no-repeat;\n        background-size: 100%;\n        top: 0;\n        left: 0;\n        right: 0;\n        margin: px2rem(12) auto 0;\n      }\n      li.active:last-child:after {\n        position: absolute;\n        content: \"\";\n        width: px2rem(22);\n        height: px2rem(22);\n        display: block;\n        z-index: 2;\n        background: url(\"~@/assets/images/icon_shaixuan-1@2x.png\") no-repeat;\n        background-size: 100%;\n        top: 0;\n        left: 0;\n        right: 0;\n        margin: px2rem(12) auto 0;\n      }\n\n      li.active {\n        color: #508cee;\n      }\n    }\n  }\n\n  .t-tab {\n    position: absolute;\n    width: 100%;\n    .divTab {\n      .t-content {\n        h4 {\n          color: #b3b3b3;\n          font-size: px2rem(14);\n          line-height: px2rem(20);\n          padding: px2rem(16) px2rem(15) px2rem(4);\n          font-weight: normal;\n        }\n        div {\n          margin-top: px2rem(5);\n          overflow: hidden;\n          ul {\n            background: #fff;\n            li {\n              display: block;\n              border-bottom: px2rem(1) solid #e7e7e7;\n              padding: px2rem(10) 0;\n              margin: 0 px2rem(15);\n\n              h5 {\n                font-size: px2rem(14);\n                line-height: px2rem(20);\n                color: #121b32;\n                font-weight: normal;\n                padding-bottom: px2rem(4);\n              }\n              p {\n                span {\n                  font-size: px2rem(12);\n                  line-height: px2rem(17);\n                  display: inline-block;\n                  padding-right: px2rem(20);\n                  color: #858e9f;\n                }\n                em {\n                  font-size: px2rem(14);\n                  float: right;\n                  line-height: px2rem(25);\n                  color: #333333;\n                }\n              }\n            }\n            li:last-child {\n              border-bottom: none;\n            }\n          }\n          ul:last-child {\n            border-bottom: none;\n          }\n        }\n      }\n      // padding-bottom: px2rem(16);\n    }\n\n    .t-date {\n      height: px2rem(44);\n      background: #efefef;\n      line-height: px2rem(44);\n      position: relative;\n      ul {\n        margin-right: px2rem(60);\n        display: flex;\n        li {\n          flex: 1;\n          display: inline-block;\n          font-size: px2rem(15);\n          color: #666666;\n          padding-left: px2rem(20);\n          span {\n            display: inline-block;\n            height: 0;\n            width: 0;\n            border-right: px2rem(5) solid transparent;\n            border-top: px2rem(6) solid #666666;\n            border-left: px2rem(5) solid transparent;\n            margin-left: px2rem(10);\n          }\n        }\n      }\n      .t-query {\n        width: px2rem(60);\n        height: px2rem(44);\n        color: #508cee;\n        font-size: px2rem(15);\n        position: absolute;\n        right: 0;\n        top: 0;\n        text-align: center;\n      }\n    }\n    .t-text {\n      padding: 0 px2rem(15);\n      font-size: px2rem(12);\n      color: #858e9f;\n      padding-top: px2rem(10);\n      line-height: px2rem(17);\n    }\n  }\n\n  .main-body {\n    overflow: auto;\n    box-sizing: border-box;\n    padding-bottom: px2rem(50);\n  }\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/views/ZhongBang/bankDetail/DealDetails.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"wrap\"},[_c('div',{staticClass:\"wrap-top\"},[_c('app-bar',{attrs:{\"title\":\"交易明细\"}}),_vm._v(\" \"),_c('ul',{staticClass:\"tabs\"},_vm._l((_vm.tabsParam),function(item,index){return _c('li',{staticClass:\"li-tab\",class:{active:index==_vm.nowIndex},on:{\"click\":function($event){_vm.toggleTabs(index)}}},[_vm._v(_vm._s(item)+\"\\n      \")])}))],1),_vm._v(\" \"),_c('div',{staticClass:\"t-tab\"},[_c('div',{staticClass:\"divTab\"},[_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.nowIndex===3),expression:\"nowIndex===3\"}],staticClass:\"t-date\"},[_c('ul',[_c('li',{on:{\"click\":_vm.setDate2}},[_vm._v(\"\\n            \"+_vm._s(_vm.startDate)+\"\\n            \"),_c('span')]),_vm._v(\" \"),_c('li',{on:{\"click\":_vm.setDate}},[_vm._v(\"\\n            \"+_vm._s(_vm.endDate)+\"\\n            \"),_c('span')])]),_vm._v(\" \"),_c('div',{staticClass:\"t-query\",on:{\"click\":_vm.query}},[_vm._v(\"查询\")])]),_vm._v(\" \"),_c('p',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.nowIndex===3),expression:\"nowIndex===3\"}],staticClass:\"t-text\"},[_vm._v(\"根据银行要求，只能查询最近两年记录，每次查询最大范围三个月\")]),_vm._v(\" \"),_c('div',{staticClass:\"t-content main-body\",style:({'-webkit-overflow-scrolling': _vm.scrollMode})},[_c('v-loadmore',{ref:\"loadmore\",attrs:{\"top-method\":_vm.loadTop,\"bottom-method\":_vm.loadBottom,\"bottom-all-loaded\":_vm.allLoaded,\"auto-fill\":false}},[_c('div',[_c('ul',_vm._l((_vm.pageList),function(item,index){return _c('li',{key:index},[_c('h5',{staticStyle:{\"display\":\"flex\"}},[_c('span',{staticStyle:{\"flex\":\"1\"}},[_vm._v(_vm._s(item.ABS_INFO))]),_vm._v(\" \"),_c('span',{staticStyle:{\"width\":\"40%\",\"text-align\":\"right\"}},[_vm._v(_vm._s(item.TYPE_NAME))])]),_vm._v(\" \"),_c('p',[_c('span',[_vm._v(_vm._s(_vm._f(\"timerFormat\")(item.TRANS_DATE)))]),_vm._v(\" \"),_c('em',[_vm._v(_vm._s(_vm._f(\"formatNum\")(item.TRANS_AMT)))])])])}))])])],1)])])])}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-eb4b257e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/views/ZhongBang/bankDetail/DealDetails.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eb4b257e\\\",\\\"scoped\\\":false,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./DealDetails.vue\")\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-eb4b257e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=1!./DealDetails.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DealDetails.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./DealDetails.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-eb4b257e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./DealDetails.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-eb4b257e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/views/ZhongBang/bankDetail/DealDetails.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}