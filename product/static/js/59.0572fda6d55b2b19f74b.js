webpackJsonp([59],{"4jhS":function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("0jG4"),o=s("EOwk"),i=s("MmTA"),n=s("b1t1"),c=s("msXN"),l=s("JIj5"),r=o.c+"/finsuitSafeCode?SESSION_ID=",h=void 0,u={data:function(){return{SESSION_ID:"",safeCodeUrl:r,msgDisabled:!1,tel:"",cms:"",pass:"",passLay:"",toUrl:"",loginPass:"loginPass",num:1,ifGet:!1,refur:!1,telShow:!1,cmsShow:!1,telPaceholder:"开户手机号",cmsholder:"短信验证码",codeText:"获取验证码",passPluginText:"",currentTel:"",ORG_ID:"",BANK_NAME:"",LOGO_URL:"",safeCode:"",showSafeCode:!1}},mixins:[c.a.HandleMixin,c.a.UtilMixin],components:{PassWordZhengzhou:n.a},inject:["reload"],created:function(){this.ORG_ID=l.a.storage.session.get("ORG_ID")||"",this.BANK_NAME=this.getBankState.ORG_NAME;var e=this.getComState.loginInfo;e&&(this.tel=e.PHONE_NUM,i.a.$emit(o.a.showToast,e.msg),this.removeComState("loginInfo"))},computed:{disabled:function(){return!(11==this.tel.length&&this.cms.length>0)}},watch:{tel:function(e,t){""!=e&&(this.isValueNumber(e)?(e.length>11&&(this.tel=this.tel.toString().substr(0,11)),this.currentTel=e,e.length>1||(e?(this.telPaceholder="",this.telShow=!0):(this.telShow=!1,this.telPaceholder="开户手机号"))):this.tel=this.currentTel)},cms:function(e,t){""!=e&&(e.length>1||(e?(this.cmsholder="",this.cmsShow=!0):(this.cmsShow=!1,this.cmsholder="短信验证码")))}},methods:{reImg:function(){},getSafeCode:function(){""==this.safeCode&&i.a.$emit(o.a.showToast,"请填写图形验证码"),this.getMsg(!0),this.showSafeCode=!1},isValueNumber:function(e){return/(^-?[0-9]+\.{1}\d+$)|(^-?[1-9][0-9]*$)|(^-?0{1}$)/.test(e)},getMsg:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],s={PHONE_NUM:this.tel+"",SAFT_CODE:this.safeCode};this.safeCode="",this.SESSION_ID="",a.a.bicai.sendSMS(s,function(s,a){var n=s.mark;e.SESSION_ID=a,0==n?(i.a.$emit(o.a.showToast,"验证码发送成功"),e.timeDown()):(console.log(t),t?e.timeDown():e.showSafeCode=!0)},function(e){})},loginFactory:function(){var e=this;if(!l.a.Check.tel(this.tel,!0)){var t={PHONE_NUM:this.tel+"",PHONE_CODE:this.cms,SAFT_CODE:this.safeCode},s=this.$store.getters.GET_COMMON_STATE.loginType;this.$store.commit("SET_TOKEN",null),a.a.bicai.login(t,function(t){a.a.watchApi({FUNCTION_ID:"ptb0A007",REMARK_DATA:"异业合作-登录",SOURCE_URL:s}),e.$store.commit("SET_BICAI_USER",t),e.$store.commit("SET_TOKEN",t.PHONE_TOKEN),e.checkBankStatus()},function(t){a.a.watchApi({FUNCTION_ID:"ptb0A007",REMARK_DATA:"异业合作-登录"}),e.$store.commit("SET_TOKEN",null),e.setComState({type:"loginInfo",value:{PHONE_NUM:e.tel,msg:t}})})}},checkAuthStatus:function(){var e=this;a.a.bicai.getAuthStatus({},function(t){var s=t.AUTH_STATUS;t.isOldMember;switch(console.log(s),Number(s)){case 0:case 1:e.$router.push(o.e.BcOpening1);break;case 2:e.$router.push(o.e.BcOpening2);break;case 3:e.$router.push(o.e.BcOpening3);break;case 4:e.checkBankStatus();break;case 5:e.$router.push(o.e.BcOpening1)}},function(t){e.codeText="重新发送",e.msgDisabled=!1,clearInterval(h)})},checkBankStatus:function(){var e=this;a.a.common.apiRegisterBackShow({},function(t){var s=t.LAST_STEP_NUM;l.a.storage.session.set("USERINFO",t),0==s&&(e.setComState({type:"openingData",value:t}),e.$router.push({name:o.e.Opening1})),1==s&&(e.setComState({type:"openingData",value:t}),e.$router.push({name:o.e.Opening2})),2==s&&(e.setComState({type:"openingData",value:t}),e.$router.push({name:o.e.Opening3})),3==s&&(e.setComState({type:"Infos",value:t}),e.checkIfPinggu(t))},function(t){e.codeText="重新发送",e.msgDisabled=!1,clearInterval(h)})},checkIfPinggu:function(e){this.removeComState("loginInfo");var t=e.HAS_GRADE;this.setComState({type:"HAS_GRADE",value:t}),1==t?(i.a.$emit(o.a.showToast,"请先进行评估"),this.$router.push({name:o.e.VerificationSuccess})):this.toPreProduct()},focusHandle:function(){this.telShow=!0,this.telPaceholder="",$(".input").css({fontSize:".5rem"})},clickMsgCodeHandle:function(){var e=this.tel;e+="",console.log(e),l.a.Check.tel(e,!0)||this.getMsg()},timeDown:function(){var e=this,t=60;this.msgDisabled=!0,h=setInterval(function(){if(0==t)return e.codeText="重新发送",e.msgDisabled=!1,void clearInterval(h);t--,e.codeText=t+"s"},1e3)}}},m={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"hello"},[a("app-bar",{attrs:{title:"安全登录"}}),e._v(" "),a("div",{staticClass:"logo-box"},[a("img",{attrs:{src:s("rfBm"),alt:""}}),e._v(" "),a("span",[e._v("比财平台"+e._s(e.BANK_NAME))])]),e._v(" "),a("div",{staticClass:"login_box"},[a("section",{staticClass:"input-box"},[a("transition",{attrs:{name:"fade"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.telShow,expression:"telShow"}],staticClass:"label"},[e._v("开户手机号")])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.tel,expression:"tel"}],staticClass:"input",attrs:{type:"input",name:"text1",placeholder:e.telPaceholder},domProps:{value:e.tel},on:{input:function(t){t.target.composing||(e.tel=t.target.value)}}})],1),e._v(" "),a("section",{staticClass:"input-box"},[a("transition",{attrs:{name:"fade"}},[a("p",{directives:[{name:"show",rawName:"v-show",value:e.cmsShow,expression:"cmsShow"}],staticClass:"label"},[e._v("短信验证码")])]),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.cms,expression:"cms"}],staticClass:"input",attrs:{type:"tel",name:"text1",placeholder:e.cmsholder},domProps:{value:e.cms},on:{input:function(t){t.target.composing||(e.cms=t.target.value)}}}),e._v(" "),a("button",{staticClass:"get-msg",attrs:{disabled:e.msgDisabled},on:{click:e.clickMsgCodeHandle}},[e._v(e._s(e.codeText))])],1),e._v(" "),a("button",{staticClass:"tijiao",on:{click:function(t){e.loginFactory(e.ORG_ID)}}},[e._v("\n      登录\n    ")]),e._v(" "),a("p",{staticClass:"infos"},[e._v("\n      温馨提示：未注册比财账号的手机号，登录时将自动注册，且代表您已同意《用户服务协议》和《比财隐私政策》\n    ")])]),e._v(" "),a("section",{directives:[{name:"show",rawName:"v-show",value:e.showSafeCode,expression:"showSafeCode"}],staticClass:"safe-code"},[a("div",[a("img",{attrs:{src:e.safeCodeUrl+e.SESSION_ID,alt:""},on:{click:e.reImg}}),e._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:e.safeCode,expression:"safeCode"}],attrs:{type:"tel",placeholder:"请输入图形验证码"},domProps:{value:e.safeCode},on:{input:function(t){t.target.composing||(e.safeCode=t.target.value)}}}),e._v(" "),a("button",{on:{click:e.getSafeCode}},[e._v("确定")])])]),e._v(" "),a("section",{staticClass:"bottomcontent"},[a("p",[a("img",{attrs:{src:s("j732"),alt:""}}),e._v("\n      "+e._s(e.BANK_NAME)+"已与比财实现安全直连")])])],1)},staticRenderFns:[]};var d=s("VU/8")(u,m,!1,function(e){s("wGy3")},"data-v-6cad45ca",null);t.default=d.exports},wGy3:function(e,t){}});
//# sourceMappingURL=59.0572fda6d55b2b19f74b.js.map