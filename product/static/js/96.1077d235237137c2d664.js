webpackJsonp([96],{fVau:function(t,s){},sTZR:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("xoIZ"),i=e("Ij8P"),n=e("0jG4"),o=e("UNnc"),r=e("MmTA"),c=e("EOwk"),l=e("JIj5"),_=e("msXN"),u={name:"ResetPayPassword",components:{ActiveInput:a.a,ErrMsg:i.a,PassInput:o.a},data:function(){return{errMsg:"",ifShow:!1,ifGet:!1,disable:!1,codeText:"获取验证码",time:60,tel:"",IDCardNum:"",Infos:{USER_NAME:""},PHONE_CODE:"",MESSAGE_TOKEN:""}},mixins:[_.a.HandleMixin],created:function(){var t=this;this.getErrMsg(function(s){t.IDCardNum=s.USER_CARD_ID,t.errMsg=s.msg}),this.Infos=this.$store.getters.GET_COMMON_STATE.Infos||this.Infos,this.tel=this.Infos.PHONE_NUM},methods:{goNext:function(){var t=this;console.log(this.IDCardNum);var s;(s=l.a.Check.idNumber(this.IDCardNum))?this.showErrMsg(s):this.PHONE_CODE?(this.Londing.open(),setTimeout(function(){t.ifShow=!0,t.Londing.close()},300)):this.showErrMsg("请填写短信验证码")},cancel:function(){this.ifShow=!1},showErrMsg:function(t){var s=this;this.errMsg=t,setTimeout(function(){s.errMsg=""},2e3)},submit:function(){var t=this,s=$("#reset_payPass").$getCiphertext(),e=$("#reset_payPass").$getPasswordLength()-0||0,a=$("#reset_repayPass").$getCiphertext(),i=$("#reset_repayPass").$getPasswordLength()-0||0;if(!l.a.Check.payPassLen(e,!0)&&!l.a.Check.payPassLen(i,!0)){var o={PHONE_CODE:this.PHONE_CODE,USER_CARD_ID:this.IDCardNum,BANK_PAY_PW:s,BANK_PAY_PW2:a,MESSAGE_TOKEN:this.MESSAGE_TOKEN,PHONE_NUM:this.tel};n.a.safe.apiUserResetPayPass(o,!0,function(s){r.a.$emit(c.a.showToast,"修改支付密码成功"),t.$router.push({name:c.e.MoreService})},function(s){t.setErrMsg({USER_CARD_ID:t.IDCardNum,msg:s}),window.location.reload()}),console.log(o)}},getMsgCode:function(){var t=this,s=this.time;this.disable=!0;var e=setInterval(function(){if(0==s)return t.codeText="重新发送",t.disable=!1,void clearInterval(e);s--,t.codeText=s+"s"},1e3),a={PHONE_NUM:this.tel+"",BIZ_TYPE:"9"};n.a.open.getMsgCode(a,function(s){r.a.$emit(c.a.showToast,"验证码发送成功"),t.MESSAGE_TOKEN=s.MESSAGE_TOKEN,console.log(t.MESSAGE_TOKEN)},function(s){clearInterval(e),t.codeText="重新发送",t.disable=!1,console.log(s)})}}},d={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("app-bar",{attrs:{title:"更换支付密码"}}),t._v(" "),e("section",{staticClass:"m-form"},[e("section",{staticClass:"m-line"},[e("span",{staticClass:"n-left"},[t._v("姓名")]),t._v(" "),e("span",{staticClass:"n-right"},[t._v(t._s(t.Infos.USER_NAME))])]),t._v(" "),e("active-input",{attrs:{"check-type":"idCard",valuePlaceholder:"身份证号",type:"text"},model:{value:t.IDCardNum,callback:function(s){t.IDCardNum=s},expression:"IDCardNum"}}),t._v(" "),e("section",{staticClass:"m-line"},[e("span",{staticClass:"n-left"},[t._v("手机号")]),t._v(" "),e("span",{staticClass:"n-right"},[t._v(t._s(t.tel))])]),t._v(" "),e("active-input",{attrs:{valuePlaceholder:"验证码"},model:{value:t.PHONE_CODE,callback:function(s){t.PHONE_CODE=s},expression:"PHONE_CODE"}},[e("template",{slot:"btn"},[e("button",{staticClass:"slot",attrs:{disabled:t.disable},on:{click:t.getMsgCode}},[t._v(t._s(t.codeText))])])],2),t._v(" "),e("section",{staticClass:"submit-box"},[e("err-msg",{attrs:{errMsg:t.errMsg,classStyle:"err-msg"}}),t._v(" "),e("button",{staticClass:"submit-btn",on:{click:t.goNext}},[t._v("下一步")])],1)],1),t._v(" "),t.ifShow?e("div",{staticClass:"bgbox"},[e("div",{staticClass:"passbox"},[e("div",{staticClass:"top"},[t._m(0),t._v(" "),e("div",{staticClass:"field_row_wrap"},[e("p",{staticClass:"field_row_key"},[t._v("\n                        交易密码\n                    ")]),t._v(" "),e("div",{staticClass:"field_row_value"},[e("pass-input",{attrs:{inputID:"reset_payPass",doGetData:t.ifGet}})],1),t._v(" "),e("p",{staticClass:"info"},[t._v("密码由6位数字组成")])]),t._v(" "),e("div",{staticClass:"field_row_wrap"},[e("p",{staticClass:"field_row_key"},[t._v("\n                        重置交易密码\n                    ")]),t._v(" "),e("div",{staticClass:"field_row_value"},[e("pass-input",{attrs:{inputID:"reset_repayPass",doGetData:t.ifGet}})],1),t._v(" "),e("p",{staticClass:"info"},[t._v("密码由6位数字组成")])])]),t._v(" "),e("div",{staticClass:"btn"},[e("button",{on:{click:t.cancel}},[t._v("取消")]),t._v(" "),e("button",{on:{click:t.submit}},[t._v("确定")])])])]):t._e()],1)},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("p",{staticClass:"title"},[s("img",{attrs:{src:e("j732"),alt:""}}),this._v("\n                    由晋商银行提供技术保障")])}]};var v=e("VU/8")(u,d,!1,function(t){e("fVau")},"data-v-2f2de0c0",null);s.default=v.exports}});
//# sourceMappingURL=96.1077d235237137c2d664.js.map